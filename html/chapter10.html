<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>Chapter 10: æ ‡å®šæŠ€æœ¯</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ¿€å…‰é›·è¾¾å®Œæ•´æŠ€æœ¯æ•™ç¨‹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 1: æ¿€å…‰é›·è¾¾åŸºç¡€åŸç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 2: æ¿€å…‰é›·è¾¾æŠ€æœ¯å‘å±•ä¸ä¸»è¦å‚å•†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 3: æ¿€å…‰é›·è¾¾ç±»å‹ä¸æ‰«ææœºåˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 4: æ¿€å…‰é›·è¾¾åˆ¶é€ æŠ€æœ¯</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 5: ä¿¡å·å¤„ç†ä¸æ—¶åºæ§åˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 6: è¯¯å·®æºåˆ†æï¼ˆéä¿¡å·å¤„ç†ï¼‰</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 7: æ¿€å…‰é›·è¾¾ç‹¬ç‰¹ä¼˜åŠ¿ä¸æ€§èƒ½æé™</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 8: ç‚¹äº‘å¤„ç†åŸºç¡€ç®—æ³•</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 9: é«˜çº§ç‚¹äº‘ç®—æ³•</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter10.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 10: æ ‡å®šæŠ€æœ¯</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter11.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 11: å¤šä¼ æ„Ÿå™¨èåˆç®—æ³•</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter12.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 12: è‡ªåŠ¨é©¾é©¶ä¸“ç”¨ç« èŠ‚</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter13.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 13: æœºå™¨äººåº”ç”¨ï¼ˆäººå½¢ä¸ä»“å‚¨ï¼‰</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter14.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Chapter 14: å…¶ä»–åº”ç”¨é¢†åŸŸ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ¿€å…‰é›·è¾¾æ•™ç¨‹é¡¹ç›®è¯´æ˜</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="chapter-10">Chapter 10: æ ‡å®šæŠ€æœ¯</h1>
<p>æ¿€å…‰é›·è¾¾çš„æµ‹é‡ç²¾åº¦ä¸ä»…å–å†³äºç¡¬ä»¶è®¾è®¡ï¼Œæ›´å–å†³äºç²¾ç¡®çš„æ ‡å®šã€‚æ ‡å®šæ˜¯å°†ä¼ æ„Ÿå™¨çš„åŸå§‹æµ‹é‡å€¼è½¬æ¢ä¸ºå‡†ç¡®ç‰©ç†é‡çš„å…³é”®è¿‡ç¨‹ï¼Œç›´æ¥å½±å“åˆ°ç‚¹äº‘è´¨é‡ã€å¤šä¼ æ„Ÿå™¨èåˆç²¾åº¦ä»¥åŠæœ€ç»ˆçš„åº”ç”¨æ•ˆæœã€‚æœ¬ç« å°†æ·±å…¥æ¢è®¨æ¿€å…‰é›·è¾¾çš„å†…å‚æ ‡å®šã€å¤–å‚æ ‡å®šä»¥åŠåœ¨çº¿è‡ªæ ‡å®šæŠ€æœ¯ï¼Œæä¾›è¯¦ç»†çš„æ•°å­¦æ¨¡å‹å’Œå®ç”¨ç®—æ³•ã€‚</p>
<h2 id="101">10.1 å†…å‚æ ‡å®š</h2>
<p>å†…å‚æ ‡å®šè§£å†³æ¿€å…‰é›·è¾¾è‡ªèº«çš„ç³»ç»Ÿè¯¯å·®ï¼ŒåŒ…æ‹¬æµ‹è·è¯¯å·®ã€è§’åº¦è¯¯å·®å’Œæ¸©åº¦æ¼‚ç§»ç­‰ã€‚è¿™äº›è¯¯å·®æºäºåˆ¶é€ å…¬å·®ã€è£…é…ç²¾åº¦å’Œç¯å¢ƒå› ç´ ã€‚</p>
<h3 id="1011">10.1.1 æµ‹è·è¯¯å·®æ¨¡å‹</h3>
<p>æ¿€å…‰é›·è¾¾çš„æµ‹è·è¯¯å·®é€šå¸¸å‘ˆç°ç³»ç»Ÿæ€§åå·®å’Œæ¯”ä¾‹è¯¯å·®ï¼š</p>
<p>$$d_{true} = a \cdot d_{meas} + b + \epsilon(d)$$
å…¶ä¸­ï¼š</p>
<ul>
<li>$a$ï¼šæ¯”ä¾‹å› å­ï¼ˆç†æƒ³å€¼ä¸º1ï¼‰</li>
<li>$b$ï¼šå›ºå®šåå·®ï¼ˆå•ä½ï¼šç±³ï¼‰</li>
<li>$\epsilon(d)$ï¼šä¸è·ç¦»ç›¸å…³çš„éçº¿æ€§è¯¯å·®</li>
</ul>
<p><strong>æ ‡å®šæ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>çº¿æ€§æœ€å°äºŒä¹˜æ³•</strong></li>
</ol>
<p>é‡‡é›†Nä¸ªæ ‡å®šç‚¹$(d_{meas,i}, d_{true,i})$ï¼Œæ„å»ºè¶…å®šæ–¹ç¨‹ç»„ï¼š
$$\begin{bmatrix} d_{meas,1} &amp; 1 \\ d_{meas,2} &amp; 1 \\ \vdots &amp; \vdots \\ d_{meas,N} &amp; 1 \end{bmatrix} \begin{bmatrix} a \\ b \end{bmatrix} = \begin{bmatrix} d_{true,1} \\ d_{true,2} \\ \vdots \\ d_{true,N} \end{bmatrix}$$
æœ€å°äºŒä¹˜è§£ï¼š
$$\begin{bmatrix} a \\ b \end{bmatrix} = (A^T A)^{-1} A^T D_{true}$$</p>
<ol start="2">
<li><strong>éçº¿æ€§è¯¯å·®å»ºæ¨¡</strong></li>
</ol>
<p>å¯¹äºé«˜ç²¾åº¦åº”ç”¨ï¼Œéœ€è€ƒè™‘éçº¿æ€§é¡¹ï¼š
$$d_{true} = a \cdot d_{meas} + b + c \cdot d_{meas}^2 + d \cdot \sin(\frac{2\pi d_{meas}}{\lambda_{mod}})$$
å…¶ä¸­æœ€åä¸€é¡¹è¡¨ç¤ºè°ƒåˆ¶æ³¢é•¿å¼•èµ·çš„å‘¨æœŸæ€§è¯¯å·®ã€‚</p>
<p><strong>å®ä¾‹è®¡ç®—ï¼š</strong></p>
<p>å‡è®¾é‡‡é›†äº†5ä¸ªæ ‡å®šç‚¹ï¼š</p>
<ul>
<li>$(10m, 10.05m)$, $(20m, 20.08m)$, $(30m, 30.12m)$, $(40m, 40.14m)$, $(50m, 50.18m)$</li>
</ul>
<p>æ„å»ºçŸ©é˜µï¼š
$$A = \begin{bmatrix} 10 &amp; 1 \\ 20 &amp; 1 \\ 30 &amp; 1 \\ 40 &amp; 1 \\ 50 &amp; 1 \end{bmatrix}, \quad D_{true} = \begin{bmatrix} 10.05 \\ 20.08 \\ 30.12 \\ 40.14 \\ 50.18 \end{bmatrix}$$
è®¡ç®—$A^T A$ï¼š
$$A^T A = \begin{bmatrix} 5500 &amp; 150 \\ 150 &amp; 5 \end{bmatrix}$$
æ±‚è§£å¾—ï¼š
$$a = 1.0034, \quad b = 0.018m$$</p>
<h3 id="1012">10.1.2 è§’åº¦ç¼–ç å™¨æ ¡æ­£</h3>
<p>æœºæ¢°æ—‹è½¬å¼æ¿€å…‰é›·è¾¾çš„è§’åº¦æµ‹é‡ä¾èµ–äºç¼–ç å™¨ï¼Œå…¶è¯¯å·®æ¨¡å‹ï¼š
$$\theta_{true} = \theta_{meas} + \Delta\theta_{offset} + A_{\theta} \sin(n\theta_{meas} + \phi_{\theta})$$
å…¶ä¸­ï¼š</p>
<ul>
<li>$\Delta\theta_{offset}$ï¼šé›¶ä½åå·®</li>
<li>$A_{\theta}$ï¼šå‘¨æœŸæ€§è¯¯å·®å¹…å€¼</li>
<li>$n$ï¼šç¼–ç å™¨é½¿æ•°</li>
<li>$\phi_{\theta}$ï¼šç›¸ä½åç§»</li>
</ul>
<p><strong>æ ‡å®šè¿‡ç¨‹ï¼š</strong></p>
<ol>
<li><strong>é™æ€ç›®æ ‡æ³•</strong></li>
</ol>
<p>å°†æ¿€å…‰é›·è¾¾å¯¹å‡†å·²çŸ¥è§’åº¦çš„æ ‡å®šæ¿é˜µåˆ—ï¼Œè®°å½•æµ‹é‡è§’åº¦ä¸çœŸå®è§’åº¦çš„å¯¹åº”å…³ç³»ã€‚</p>
<ol start="2">
<li><strong>è‡ªæ ‡å®šæ³•</strong></li>
</ol>
<p>åˆ©ç”¨é‡å¤æ‰«æåŒä¸€é™æ€åœºæ™¯ï¼Œé€šè¿‡æœ€å°åŒ–ç‚¹äº‘é…å‡†è¯¯å·®æ¥ä¼˜åŒ–è§’åº¦å‚æ•°ï¼š
$$\min_{\Delta\theta, A_{\theta}, \phi_{\theta}} \sum_{i,j} |P_i(\theta + \delta\theta) - P_j(\theta)|^2$$
<strong>å®é™…æ¡ˆä¾‹ï¼š</strong></p>
<p>æŸ64çº¿æ¿€å…‰é›·è¾¾ï¼Œç¼–ç å™¨åˆ†è¾¨ç‡0.1Â°ï¼Œå®æµ‹å‘ç°ï¼š</p>
<ul>
<li>é›¶ä½åå·®ï¼š$\Delta\theta_{offset} = 0.23Â°$</li>
<li>å‘¨æœŸæ€§è¯¯å·®ï¼š$A_{\theta} = 0.05Â°$ï¼Œå‘¨æœŸä¸º360Â°/1024ï¼ˆç¼–ç å™¨çº¿æ•°ï¼‰</li>
</ul>
<p>æ ¡æ­£åè§’åº¦ç²¾åº¦ä»Â±0.15Â°æå‡è‡³Â±0.03Â°ã€‚</p>
<h3 id="1013">10.1.3 æ¸©åº¦è¡¥å¿è¡¨</h3>
<p>æ¸©åº¦å˜åŒ–å½±å“æµ‹è·ç²¾åº¦å’Œæœºæ¢°ç»“æ„ï¼Œéœ€å»ºç«‹æ¸©åº¦è¡¥å¿æ¨¡å‹ï¼š
$$d_{comp} = d_{meas} \cdot [1 + \alpha_T(T - T_{ref})] + \beta_T(T - T_{ref})^2$$
<strong>æ¸©åº¦æ ‡å®šå®éªŒï¼š</strong></p>
<ol>
<li><strong>æ§æ¸©å®éªŒ</strong></li>
</ol>
<p>åœ¨æ¸©æ§ç®±ä¸­ï¼Œæ¸©åº¦èŒƒå›´-40Â°Cè‡³+85Â°Cï¼Œæ¯10Â°Cé‡‡é›†ä¸€ç»„æ•°æ®ï¼š</p>
<p>| æ¸©åº¦(Â°C) | 10mç›®æ ‡æµ‹è·(m) | 50mç›®æ ‡æµ‹è·(m) |</p>
<table>
<thead>
<tr>
<th>æ¸©åº¦(Â°C)</th>
<th>10mç›®æ ‡æµ‹è·(m)</th>
<th>50mç›®æ ‡æµ‹è·(m)</th>
</tr>
</thead>
<tbody>
<tr>
<td>-40</td>
<td>9.982</td>
<td>49.915</td>
</tr>
<tr>
<td>-20</td>
<td>9.991</td>
<td>49.957</td>
</tr>
<tr>
<td>0</td>
<td>9.998</td>
<td>49.992</td>
</tr>
<tr>
<td>20</td>
<td>10.000</td>
<td>50.000</td>
</tr>
<tr>
<td>40</td>
<td>10.003</td>
<td>50.016</td>
</tr>
<tr>
<td>60</td>
<td>10.008</td>
<td>50.041</td>
</tr>
<tr>
<td>85</td>
<td>10.015</td>
<td>50.074</td>
</tr>
</tbody>
</table>
<ol start="2">
<li><strong>è¡¥å¿ç³»æ•°è®¡ç®—</strong></li>
</ol>
<p>é€šè¿‡æ‹Ÿåˆå¾—åˆ°ï¼š</p>
<ul>
<li>çº¿æ€§ç³»æ•°ï¼š$\alpha_T = 3.2 \times 10^{-5}/Â°C$</li>
<li>äºŒæ¬¡ç³»æ•°ï¼š$\beta_T = 8.5 \times 10^{-8}/Â°C^2$</li>
</ul>
<h3 id="1014">10.1.4 å¤šå›æ³¢æ—¶åºæ ¡æ­£</h3>
<p>å¯¹äºæ”¯æŒå¤šå›æ³¢çš„æ¿€å…‰é›·è¾¾ï¼Œä¸åŒå›æ³¢é€šé“å¯èƒ½å­˜åœ¨æ—¶åºåå·®ï¼š
$$t_{corrected,i} = t_{measured,i} + \Delta t_i + \gamma_i \cdot (t_{measured,i} - t_{first})$$
å…¶ä¸­ï¼š</p>
<ul>
<li>$\Delta t_i$ï¼šç¬¬iä¸ªå›æ³¢çš„å›ºå®šå»¶è¿Ÿ</li>
<li>$\gamma_i$ï¼šä¸é¦–æ¬¡å›æ³¢æ—¶é—´å·®ç›¸å…³çš„æ¯”ä¾‹å› å­</li>
</ul>
<p><strong>æ ‡å®šæ–¹æ³•ï¼š</strong></p>
<p>ä½¿ç”¨ä¸åŒè·ç¦»çš„æ¼«åå°„ç›®æ ‡ï¼Œç¡®ä¿åªäº§ç”Ÿå•æ¬¡å›æ³¢ï¼Œæµ‹é‡å„é€šé“çš„æ—¶é—´åå·®ã€‚</p>
<h3 id="1015">10.1.5 æ¿€å…‰åŠŸç‡æ ¡æ­£</h3>
<p>ä¸åŒæ¿€å…‰é€šé“çš„åŠŸç‡å·®å¼‚å½±å“æœ€å¤§æ¢æµ‹è·ç¦»å’Œåå°„ç‡è®¡ç®—ï¼š
$$P_{normalized,i} = P_{measured,i} \cdot K_i \cdot f(T)$$
å…¶ä¸­$K_i$ä¸ºç¬¬iä¸ªé€šé“çš„åŠŸç‡æ ¡æ­£ç³»æ•°ã€‚</p>
<p><strong>åŠŸç‡å‡è¡¡æ ‡å®šï¼š</strong></p>
<ol>
<li>ä½¿ç”¨æ ‡å‡†åå°„ç‡é¶æ ‡ï¼ˆå¦‚10%ã€50%ã€90%ï¼‰</li>
<li>å›ºå®šè·ç¦»ä¸‹æµ‹é‡å„é€šé“è¿”å›ä¿¡å·å¼ºåº¦</li>
<li>è®¡ç®—æ ¡æ­£ç³»æ•°ä½¿æ‰€æœ‰é€šé“å“åº”ä¸€è‡´</li>
</ol>
<h3 id="1016">10.1.6 å†…å‚æ ‡å®šçš„ç³»ç»Ÿé›†æˆ</h3>
<p>æ ‡å®šå‚æ•°ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œæ˜¯ç›¸äº’å½±å“çš„ç³»ç»Ÿã€‚ç†è§£è¿™äº›ç›¸äº’ä½œç”¨å¯¹äºè·å¾—é«˜è´¨é‡æ ‡å®šè‡³å…³é‡è¦ã€‚</p>
<p><strong>å‚æ•°è€¦åˆæ•ˆåº”ï¼š</strong></p>
<ol>
<li><strong>è·ç¦»-è§’åº¦è€¦åˆ</strong></li>
</ol>
<p>æ‰«æè§’åº¦è¯¯å·®ä¼šå¼•å…¥è·ç¦»è¯¯å·®ï¼š
$$\Delta d = d \cdot \tan(\Delta\theta) \approx d \cdot \Delta\theta$$
ä¾‹å¦‚ï¼š100må¤„0.1Â°çš„è§’åº¦è¯¯å·®å¯¼è‡´17.5cmçš„ä½ç½®è¯¯å·®ã€‚</p>
<ol start="2">
<li><strong>æ¸©åº¦-åŠŸç‡è€¦åˆ</strong></li>
</ol>
<p>æ¸©åº¦å½±å“æ¿€å…‰å™¨æ•ˆç‡å’Œæ¢æµ‹å™¨çµæ•åº¦ï¼š
$$P_{effective}(T) = P_0 \cdot \eta_{laser}(T) \cdot \eta_{detector}(T)$$
å…¸å‹æ¸©åº¦ç³»æ•°ï¼š</p>
<ul>
<li>æ¿€å…‰å™¨ï¼š-0.3%/Â°C</li>
<li>APDå¢ç›Šï¼š-2%/Â°C</li>
</ul>
<ol start="3">
<li><strong>æŒ¯åŠ¨-æ—¶åºè€¦åˆ</strong></li>
</ol>
<p>æœºæ¢°æŒ¯åŠ¨å¼•å…¥æ—¶åºæŠ–åŠ¨ï¼š
$$\sigma_{timing} = \sqrt{\sigma_{electronic}^2 + \sigma_{vibration}^2}$$</p>
<h3 id="1017">10.1.7 ç»¼åˆæ ‡å®šæµç¨‹</h3>
<p>å®Œæ•´çš„å†…å‚æ ‡å®šæµç¨‹éœ€è¦è€ƒè™‘å·¥ä¸šåŒ–ç”Ÿäº§å’Œç°åœºåº”ç”¨çš„å®é™…éœ€æ±‚ï¼š</p>
<h4 id="1">1. ç¯å¢ƒå‡†å¤‡ä¸è®¾å¤‡è¦æ±‚</h4>
<p><strong>æ ‡å®šåœºåœ°è§„æ ¼ï¼š</strong></p>
<ul>
<li>é•¿åº¦ï¼šâ‰¥150mï¼ˆè¦†ç›–æœ€å¤§æµ‹ç¨‹ï¼‰</li>
<li>å®½åº¦ï¼šâ‰¥30mï¼ˆå…è®¸å¤šè§’åº¦æµ‹è¯•ï¼‰</li>
<li>åœ°é¢å¹³æ•´åº¦ï¼šÂ±5mm/m</li>
<li>ç¯å¢ƒæ§åˆ¶ï¼š</li>
<li>æ¸©åº¦æ§åˆ¶ç²¾åº¦ï¼šÂ±0.5Â°C</li>
<li>æ¹¿åº¦æ§åˆ¶ï¼š30%-70% RH</li>
<li>ç…§åº¦å¯è°ƒï¼š0-100,000 lux</li>
</ul>
<p><strong>æ ‡å‡†è®¾å¤‡ï¼š</strong></p>
<ul>
<li>æ¿€å…‰è·Ÿè¸ªä»ªï¼šç²¾åº¦â‰¤0.01mm+1ppm</li>
<li>æ ‡å‡†åå°„æ¿ï¼š10%, 50%, 90%åå°„ç‡ï¼ˆæ ‡å®šç²¾åº¦Â±2%ï¼‰</li>
<li>æ¸©åº¦ä¼ æ„Ÿå™¨é˜µåˆ—ï¼šåˆ†è¾¨ç‡0.1Â°C</li>
<li>æŒ¯åŠ¨ç›‘æµ‹ç³»ç»Ÿï¼šæ£€æµ‹&gt;0.1gåŠ é€Ÿåº¦</li>
</ul>
<h4 id="2">2. åˆ†çº§æ ‡å®šç­–ç•¥</h4>
<p><strong>Level 1 - å¿«é€Ÿæ ‡å®šï¼ˆç”Ÿäº§çº¿ï¼‰ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code>æ—¶é—´è¦æ±‚ï¼š&lt;5åˆ†é’Ÿ/å°
æµ‹è¯•ç‚¹æ•°ï¼š20-30ä¸ª
å‚æ•°ï¼šåŸºæœ¬æµ‹è·å’Œè§’åº¦åå·®
ç²¾åº¦ç›®æ ‡ï¼šÂ±5cm @ 50m
</code></pre></div>

<p><strong>Level 2 - æ ‡å‡†æ ‡å®šï¼ˆå‡ºå‚ï¼‰ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code>æ—¶é—´è¦æ±‚ï¼š30-60åˆ†é’Ÿ
æµ‹è¯•ç‚¹æ•°ï¼š200-500ä¸ª
å‚æ•°ï¼šå…¨éƒ¨å†…å‚+æ¸©åº¦è¡¥å¿
ç²¾åº¦ç›®æ ‡ï¼šÂ±2cm @ 50m
</code></pre></div>

<p><strong>Level 3 - ç²¾å¯†æ ‡å®šï¼ˆç‰¹æ®Šåº”ç”¨ï¼‰ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code>æ—¶é—´è¦æ±‚ï¼š4-8å°æ—¶
æµ‹è¯•ç‚¹æ•°ï¼š&gt;2000ä¸ª
å‚æ•°ï¼šåŒ…æ‹¬éçº¿æ€§é¡¹å’Œäº¤å‰è€¦åˆ
ç²¾åº¦ç›®æ ‡ï¼šÂ±1cm @ 50m
</code></pre></div>

<h4 id="3">3. è‡ªåŠ¨åŒ–æ ‡å®šæµç¨‹</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># æ ‡å®šä¸»æµç¨‹ä¼ªä»£ç </span>
<span class="k">class</span> <span class="nc">LidarCalibration</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">CalibrationParameters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">automated_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># é˜¶æ®µ1ï¼šç²—æ ‡å®š</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coarse_calibration</span><span class="p">()</span>

        <span class="c1"># é˜¶æ®µ2ï¼šç²¾ç»†æ ‡å®š</span>
        <span class="k">for</span> <span class="n">temp</span> <span class="ow">in</span> <span class="n">temperature_range</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_chamber_temperature</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_thermal_equilibrium</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">distance_range</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">angle</span> <span class="ow">in</span> <span class="n">angle_range</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">reflectivity</span> <span class="ow">in</span> <span class="n">reflectivity_range</span><span class="p">:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collect_data</span><span class="p">(</span><span class="n">n_frames</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># é˜¶æ®µ3ï¼šå‚æ•°ä¼˜åŒ–</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optimize_parameters</span><span class="p">()</span>

        <span class="c1"># é˜¶æ®µ4ï¼šéªŒè¯</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validation_test</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">optimize_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># æ„å»ºæˆæœ¬å‡½æ•°</span>
        <span class="n">cost</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span><span class="p">:</span>
            <span class="n">cost</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_residual</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>

        <span class="c1"># ä½¿ç”¨L-BFGS-Bä¼˜åŒ–</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span>
            <span class="n">fun</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cost_function</span><span class="p">,</span>
            <span class="n">x0</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">to_vector</span><span class="p">(),</span>
            <span class="n">method</span><span class="o">=</span><span class="s1">&#39;L-BFGS-B&#39;</span><span class="p">,</span>
            <span class="n">bounds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">from_vector</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>

<h4 id="4">4. æ•°æ®é‡‡é›†ä¼˜åŒ–</h4>
<p><strong>æ™ºèƒ½é‡‡æ ·ç­–ç•¥ï¼š</strong></p>
<ol>
<li>
<p><strong>è‡ªé€‚åº”å¯†åº¦é‡‡æ ·</strong>
   - è¯¯å·®æ¢¯åº¦å¤§çš„åŒºåŸŸå¢åŠ é‡‡æ ·å¯†åº¦
   - ä½¿ç”¨è´å¶æ–¯ä¼˜åŒ–é€‰æ‹©ä¸‹ä¸€ä¸ªæµ‹è¯•ç‚¹</p>
</li>
<li>
<p><strong>å¹¶è¡Œæ•°æ®é‡‡é›†</strong>
   - å¤šä¸ªæ¿€å…‰é€šé“åŒæ—¶æ ‡å®š
   - ä½¿ç”¨GPUåŠ é€Ÿæ•°æ®å¤„ç†</p>
</li>
<li>
<p><strong>å®æ—¶è´¨é‡ç›‘æ§</strong></p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">if</span><span class="w"> </span>æ®‹å·®<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span>Ïƒ:
<span class="w">    </span>æ ‡è®°å¼‚å¸¸ç‚¹
<span class="w">    </span>è§¦å‘é‡æ–°é‡‡é›†
<span class="k">if</span><span class="w"> </span>è¿ç»­å¼‚å¸¸<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span>:
<span class="w">    </span>åœæ­¢æ ‡å®šï¼Œæ£€æŸ¥è®¾å¤‡
</code></pre></div>

<h4 id="5">5. å‚æ•°ä¼˜åŒ–ç®—æ³•</h4>
<p><strong>å¤šç›®æ ‡ä¼˜åŒ–æ¡†æ¶ï¼š</strong>
$$\min_{\theta} \sum_{i=1}^{N} w_i L_i(\theta) + \lambda R(\theta)$$
å…¶ä¸­ï¼š</p>
<ul>
<li>$L_i$ï¼šç¬¬iç±»è¯¯å·®çš„æŸå¤±å‡½æ•°</li>
<li>$w_i$ï¼šæƒé‡ç³»æ•°</li>
<li>$R(\theta)$ï¼šæ­£åˆ™åŒ–é¡¹ï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆï¼‰</li>
<li>$\lambda$ï¼šæ­£åˆ™åŒ–å¼ºåº¦</li>
</ul>
<p><strong>å…·ä½“å®ç°ï¼š</strong></p>
<ol>
<li><strong>é²æ£’æŸå¤±å‡½æ•°</strong></li>
</ol>
<p>ä½¿ç”¨HuberæŸå¤±å‡å°‘å¼‚å¸¸å€¼å½±å“ï¼š
$$L_{huber}(r) = \begin{cases}
   \frac{1}{2}r^2, &amp; |r| \leq \delta \\
   \delta(|r| - \frac{1}{2}\delta), &amp; |r| &gt; \delta
   \end{cases}$$</p>
<ol start="2">
<li><strong>çº¦æŸä¼˜åŒ–</strong></li>
</ol>
<p>ç‰©ç†çº¦æŸï¼š</p>
<ul>
<li>æ¸©åº¦ç³»æ•°èŒƒå›´ï¼š$|\alpha_T| &lt; 10^{-4}/Â°C$</li>
<li>æ¯”ä¾‹å› å­èŒƒå›´ï¼š$0.99 &lt; a &lt; 1.01$</li>
<li>è§’åº¦åå·®èŒƒå›´ï¼š$|\Delta\theta| &lt; 1Â°$</li>
</ul>
<ol start="3">
<li><strong>å…¨å±€ä¼˜åŒ–ç­–ç•¥</strong></li>
</ol>
<p>ç»“åˆå±€éƒ¨å’Œå…¨å±€ä¼˜åŒ–ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="gh">#</span> ç¬¬1æ­¥ï¼šå…¨å±€æœç´¢ï¼ˆæ¨¡æ‹Ÿé€€ç«ï¼‰
initial_params = simulated_annealing(
    cost_function, 
    initial_temp=100,
    cooling_rate=0.95
)

<span class="gh">#</span> ç¬¬2æ­¥ï¼šå±€éƒ¨ç²¾ç»†åŒ–ï¼ˆL-Mç®—æ³•ï¼‰
final_params = levenberg_marquardt(
    cost_function,
    initial_params,
    tolerance=1e-6
)
</code></pre></div>

<h4 id="6">6. éªŒè¯æµ‹è¯•åè®®</h4>
<p><strong>é™æ€ç²¾åº¦æµ‹è¯•ï¼š</strong></p>
<ul>
<li>æ ‡å‡†ç›®æ ‡æ¿ç½‘æ ¼ï¼ˆ5Ã—5ï¼‰</li>
<li>è·ç¦»ï¼š10m, 30m, 50m, 80m, 100m</li>
<li>æ¯ç‚¹æµ‹é‡100æ¬¡ï¼Œè®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®</li>
<li>åˆæ ¼æ ‡å‡†ï¼š</li>
<li>å‡å€¼è¯¯å·® &lt; 1cm</li>
<li>æ ‡å‡†å·® &lt; 0.5cm</li>
</ul>
<p><strong>åŠ¨æ€ç²¾åº¦æµ‹è¯•ï¼š</strong></p>
<ul>
<li>åŒ€é€Ÿè¿åŠ¨ç›®æ ‡ï¼ˆ1m/s, 5m/s, 10m/sï¼‰</li>
<li>ä½¿ç”¨é«˜ç²¾åº¦ç¼–ç å™¨ä½œä¸ºçœŸå€¼</li>
<li>éªŒè¯è¿åŠ¨è¡¥å¿ç®—æ³•</li>
</ul>
<p><strong>é•¿æœŸç¨³å®šæ€§æµ‹è¯•ï¼š</strong></p>
<ul>
<li>è¿ç»­è¿è¡Œ24å°æ—¶</li>
<li>æ¯å°æ—¶è®°å½•æ ‡å®šæ¿æµ‹é‡å€¼</li>
<li>æ¼‚ç§»é‡ &lt; 2mm/å°æ—¶</li>
</ul>
<h3 id="1018">10.1.8 æ ‡å®šæ•°æ®ç®¡ç†</h3>
<p><strong>æ ‡å®šè¯ä¹¦ç”Ÿæˆï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;calibration_certificate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;device_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LDR-2024-001234&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;calibration_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-03-15T14:30:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;calibration_facility&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Factory_01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;operator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CalBot-005&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;environmental_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;temperature&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">22.5</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;humidity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;pressure&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">101.3</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;calibration_results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;distance_calibration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;scale_factor&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0012</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.008</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;nonlinear_coeffs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1.2e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">-3.4e-9</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;uncertainty&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;angle_calibration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;zero_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.23</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;periodic_amplitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;periodic_phase&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.57</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;temperature_compensation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;reference_temp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">20.0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;linear_coeff&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2e-5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;quadratic_coeff&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">8.5e-8</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;validation_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;static_rmse&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.018</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dynamic_rmse&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.025</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;temperature_stability&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0008</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;next_calibration_due&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-03-15&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>æ ‡å®šè¿½æº¯ç³»ç»Ÿï¼š</strong></p>
<ul>
<li>ç‰ˆæœ¬æ§åˆ¶ï¼šGitç®¡ç†æ ‡å®šå‚æ•°å˜æ›´</li>
<li>æ•°æ®å¤‡ä»½ï¼šäº‘ç«¯å­˜å‚¨åŸå§‹æ ‡å®šæ•°æ®</li>
<li>å¼‚å¸¸è¿½è¸ªï¼šè®°å½•æ‰€æœ‰æ ‡å®šå¤±è´¥æ¡ˆä¾‹</li>
</ul>
<h3 id="1019">10.1.9 ç°åœºé‡æ ‡å®šæŒ‡å—</h3>
<p>å¯¹äºå·²éƒ¨ç½²çš„ç³»ç»Ÿï¼Œæä¾›ç°åœºæ ‡å®šèƒ½åŠ›ï¼š</p>
<p><strong>ä¾¿æºå¼æ ‡å®šå¥—ä»¶ï¼š</strong></p>
<ol>
<li>æŠ˜å å¼æ ‡å®šæ¶ï¼ˆç²¾åº¦Â±2mmï¼‰</li>
<li>æ¿€å…‰æµ‹è·ä»ªï¼ˆç²¾åº¦Â±1mmï¼‰</li>
<li>æ ‡å‡†åå°„æ¿å¥—è£…</li>
<li>æ ‡å®šè½¯ä»¶ï¼ˆå¹³æ¿ç”µè„‘ç‰ˆï¼‰</li>
</ol>
<p><strong>å¿«é€Ÿæ ‡å®šç¨‹åºï¼ˆ15åˆ†é’Ÿï¼‰ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">éƒ¨ç½²æ ‡å®šæ¶äº10m</span><span class="p">,</span><span class="w"> </span><span class="mf">30</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="n">m</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">æ¯ä¸ªä½ç½®é‡‡é›†100å¸§</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">è¿è¡Œè‡ªåŠ¨æ ‡å®šç®—æ³•</span>
<span class="mf">4.</span><span class="w"> </span><span class="n">éªŒè¯ç²¾åº¦æå‡</span>
<span class="mf">5.</span><span class="w"> </span><span class="n">ä¸Šä¼ æ ‡å®šç»“æœè‡³äº‘ç«¯</span>
</code></pre></div>

<p><strong>æ•…éšœè¯Šæ–­æ¨¡å¼ï¼š</strong></p>
<ul>
<li>é€šé“ä¸€è‡´æ€§æ£€æŸ¥</li>
<li>æ¸©åº¦å“åº”æµ‹è¯•</li>
<li>æœºæ¢°æŒ¯åŠ¨åˆ†æ</li>
<li>è‡ªåŠ¨ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š</li>
</ul>
<h2 id="102">10.2 å¤–å‚æ ‡å®š</h2>
<p>å¤–å‚æ ‡å®šç¡®å®šæ¿€å…‰é›·è¾¾åœ¨è½½ä½“åæ ‡ç³»ä¸­çš„ä½ç½®å’Œå§¿æ€ï¼Œå¯¹äºå¤šä¼ æ„Ÿå™¨ç³»ç»Ÿè‡³å…³é‡è¦ã€‚å¤–å‚åŒ…æ‹¬3ä¸ªå¹³ç§»å‚æ•°$(t_x, t_y, t_z)$å’Œ3ä¸ªæ—‹è½¬å‚æ•°ï¼ˆé€šå¸¸ç”¨æ¬§æ‹‰è§’$(\phi, \theta, \psi)$æˆ–å››å…ƒæ•°è¡¨ç¤ºï¼‰ã€‚</p>
<h3 id="1021">10.2.1 æ‰‹çœ¼æ ‡å®šé—®é¢˜</h3>
<p>æ¿€å…‰é›·è¾¾å¤–å‚æ ‡å®šå¯å½’ç»“ä¸ºç»å…¸çš„AX=XBé—®é¢˜ï¼š
$$T_{base}^{target} \cdot T_{lidar}^{base} = T_{lidar}^{base} \cdot T_{lidar}^{target}$$
ç®€åŒ–ä¸ºï¼š
$$AX = XB$$
å…¶ä¸­ï¼š</p>
<ul>
<li>$A = T_{base,i}^{base,j}$ï¼šè½½ä½“åœ¨ä¸åŒä½ç½®é—´çš„å˜æ¢</li>
<li>$B = T_{lidar,i}^{lidar,j}$ï¼šæ¿€å…‰é›·è¾¾è§‚æµ‹åˆ°çš„ç›¸å¯¹å˜æ¢</li>
<li>$X = T_{lidar}^{base}$ï¼šå¾…æ±‚çš„å¤–å‚çŸ©é˜µ</li>
</ul>
<h3 id="1022">10.2.2 åŸºäºç‰¹å¾çš„æ ‡å®šæ–¹æ³•</h3>
<ol>
<li><strong>æ£‹ç›˜æ ¼æ ‡å®šæ¿æ³•</strong></li>
</ol>
<p>ä½¿ç”¨å¤§å‹æ£‹ç›˜æ ¼æ ‡å®šæ¿ï¼ŒåŒæ—¶è¢«ç›¸æœºå’Œæ¿€å…‰é›·è¾¾è§‚æµ‹ï¼š</p>
<p>æ ‡å®šæ­¥éª¤ï¼š</p>
<ol>
<li>ç›¸æœºæ£€æµ‹æ£‹ç›˜æ ¼è§’ç‚¹ï¼Œè®¡ç®—ä½å§¿$T_{camera}^{board}$</li>
<li>æ¿€å…‰é›·è¾¾æå–å¹³é¢ï¼Œæ‹Ÿåˆå¾—åˆ°$T_{lidar}^{board}$</li>
<li>
<p>å·²çŸ¥ç›¸æœº-è½½ä½“å¤–å‚$T_{camera}^{base}$ï¼Œæ±‚è§£ï¼š
$$T_{lidar}^{base} = T_{camera}^{base} \cdot T_{camera}^{board} \cdot (T_{lidar}^{board})^{-1}$$</p>
</li>
<li>
<p><strong>ä¸‰é¢ä½“è§’åå°„å™¨æ³•</strong></p>
</li>
</ol>
<p>ä½¿ç”¨è§’åå°„å™¨ä½œä¸ºé«˜ç²¾åº¦æ§åˆ¶ç‚¹ï¼š</p>
<p>è§’åå°„å™¨åœ¨ç‚¹äº‘ä¸­è¡¨ç°ä¸ºé«˜å¼ºåº¦ç‚¹ï¼Œä½ç½®ç²¾åº¦å¯è¾¾æ¯«ç±³çº§ã€‚é€šè¿‡å¤šä¸ªè§’åå°„å™¨æ„å»ºçº¦æŸï¼š
$$\min_{R,t} \sum_{i=1}^{n} |R \cdot p_i^{lidar} + t - p_i^{base}|^2$$
å…¶ä¸­$p_i^{base}$ä¸ºè§’åå°„å™¨åœ¨åŸºå‡†åæ ‡ç³»ä¸­çš„å·²çŸ¥ä½ç½®ã€‚</p>
<h3 id="1023">10.2.3 æœ€å°äºŒä¹˜è§£æ³•</h3>
<p>å¯¹äºè¿‡çº¦æŸçš„æ ‡å®šé—®é¢˜ï¼Œä½¿ç”¨SVDåˆ†è§£æ±‚è§£ï¼š</p>
<p><strong>æ—‹è½¬çŸ©é˜µæ±‚è§£ï¼š</strong></p>
<ol>
<li>
<p>è®¡ç®—è´¨å¿ƒï¼š
$$\bar{p}^{lidar} = \frac{1}{n}\sum_{i=1}^{n} p_i^{lidar}, \quad \bar{p}^{base} = \frac{1}{n}\sum_{i=1}^{n} p_i^{base}$$</p>
</li>
<li>
<p>å»è´¨å¿ƒï¼š
$$q_i^{lidar} = p_i^{lidar} - \bar{p}^{lidar}, \quad q_i^{base} = p_i^{base} - \bar{p}^{base}$$</p>
</li>
<li>
<p>æ„å»ºåæ–¹å·®çŸ©é˜µï¼š
$$H = \sum_{i=1}^{n} q_i^{lidar} \cdot (q_i^{base})^T$$</p>
</li>
<li>
<p>SVDåˆ†è§£ï¼š
$$H = U\Sigma V^T$$</p>
</li>
<li>
<p>è®¡ç®—æ—‹è½¬çŸ©é˜µï¼š
$$R = V \cdot \text{diag}(1, 1, \det(VU^T)) \cdot U^T$$
<strong>å¹³ç§»å‘é‡æ±‚è§£ï¼š</strong>
$$t = \bar{p}^{base} - R \cdot \bar{p}^{lidar}$$</p>
</li>
</ol>
<h3 id="1024">10.2.4 æ ‡å®šä¸ç¡®å®šåº¦åˆ†æ</h3>
<p>å¤–å‚æ ‡å®šçš„ä¸ç¡®å®šåº¦æ¥æºäºï¼š</p>
<ol>
<li><strong>æµ‹é‡å™ªå£°ä¼ æ’­</strong></li>
</ol>
<p>æ ¹æ®è¯¯å·®ä¼ æ’­å®šå¾‹ï¼š
$$\Sigma_{X} = J_f \Sigma_{obs} J_f^T$$
å…¶ä¸­$J_f$ä¸ºé›…å¯æ¯”çŸ©é˜µï¼Œ$\Sigma_{obs}$ä¸ºè§‚æµ‹åæ–¹å·®ã€‚</p>
<ol start="2">
<li><strong>å‡ ä½•é…ç½®å½±å“</strong></li>
</ol>
<p>DOPï¼ˆDilution of Precisionï¼‰å› å­ï¼š
$$DOP = \sqrt{\text{trace}((A^T A)^{-1})}$$
DOPå€¼è¶Šå°ï¼Œæ ‡å®šç²¾åº¦è¶Šé«˜ã€‚</p>
<p><strong>å®ä¾‹åˆ†æï¼š</strong></p>
<p>æŸè½¦è½½ç³»ç»Ÿæ ‡å®šç»“æœï¼š</p>
<ul>
<li>å¹³ç§»ç²¾åº¦ï¼š$\sigma_t = [2.1mm, 1.8mm, 3.2mm]$</li>
<li>æ—‹è½¬ç²¾åº¦ï¼š$\sigma_R = [0.05Â°, 0.04Â°, 0.08Â°]$ï¼ˆroll, pitch, yawï¼‰</li>
</ul>
<p>é€šè¿‡è’™ç‰¹å¡æ´›ä»¿çœŸï¼ˆ1000æ¬¡ï¼‰ï¼ŒéªŒè¯æ ‡å®šä¸ç¡®å®šåº¦ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">1000</span><span class="ss">)</span>:
<span class="w">    </span>æ·»åŠ é«˜æ–¯å™ªå£°åˆ°è§‚æµ‹ç‚¹
<span class="w">    </span>é‡æ–°è®¡ç®—å¤–å‚
<span class="w">    </span>è®°å½•ä¸çœŸå€¼çš„åå·®
è®¡ç®—æ ‡å‡†å·®ä½œä¸ºä¸ç¡®å®šåº¦ä¼°è®¡
</code></pre></div>

<h3 id="1025">10.2.5 å¤šæ¿€å…‰é›·è¾¾ç³»ç»Ÿæ ‡å®š</h3>
<p>å½“ç³»ç»ŸåŒ…å«å¤šä¸ªæ¿€å…‰é›·è¾¾æ—¶ï¼Œéœ€è¦æ ‡å®šç›¸äº’ä¹‹é—´çš„å¤–å‚ï¼š</p>
<p><strong>é‡å åŒºåŸŸé…å‡†æ³•ï¼š</strong></p>
<ol>
<li>è¯†åˆ«é‡å åŒºåŸŸç‚¹äº‘</li>
<li>
<p>ä½¿ç”¨ICPæˆ–NDTç®—æ³•é…å‡†ï¼š
$$T_{lidar2}^{lidar1} = \arg\min_{R,t} \sum_{i} |R \cdot p_i^{lidar2} + t - p_i^{lidar1}|^2$$</p>
</li>
<li>
<p>è€ƒè™‘æ—¶é—´åŒæ­¥ï¼Œè¡¥å¿è¿åŠ¨ç•¸å˜</p>
</li>
</ol>
<p><strong>å…¨å±€ä¼˜åŒ–ï¼š</strong></p>
<p>æ„å»ºå› å­å›¾ï¼ŒåŒæ—¶ä¼˜åŒ–æ‰€æœ‰æ¿€å…‰é›·è¾¾å¤–å‚ï¼š
$$\min \sum_{i&lt;j} |T_i \cdot T_{ij}^{measured} - T_j|_{\Sigma_{ij}}^2$$</p>
<h3 id="1026">10.2.6 åŠ¨æ€å¤–å‚æ ‡å®š</h3>
<p>å¯¹äºç§»åŠ¨å¹³å°ï¼Œè€ƒè™‘æŒ¯åŠ¨å’Œå½¢å˜çš„å½±å“ï¼š
$$T_{lidar}^{base}(t) = T_{static} \cdot \exp(\sum_{k=1}^{n} \xi_k \sin(2\pi f_k t + \phi_k))$$
å…¶ä¸­$\xi_k$ä¸ºç¬¬ké˜¶æŒ¯åŠ¨æ¨¡æ€çš„æä»£æ•°è¡¨ç¤ºã€‚</p>
<p><strong>åœ¨çº¿ä¼°è®¡æ–¹æ³•ï¼š</strong></p>
<p>ä½¿ç”¨æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨(EKF)å®æ—¶ä¼°è®¡å¤–å‚å˜åŒ–ï¼š</p>
<p>çŠ¶æ€å‘é‡ï¼š$x = [t_x, t_y, t_z, \phi, \theta, \psi, \dot{t}_x, ..., \dot{\psi}]^T$</p>
<p>çŠ¶æ€è½¬ç§»ï¼š
$$x_{k+1} = f(x_k) + w_k$$
è§‚æµ‹æ–¹ç¨‹ï¼š
$$z_k = h(x_k) + v_k$$
å…¶ä¸­è§‚æµ‹é‡æ¥è‡ªç‚¹äº‘é…å‡†æ®‹å·®ã€‚</p>
<h3 id="1027">10.2.7 æ ‡å®šè´¨é‡è¯„ä¼°</h3>
<p>æ ‡å®šè´¨é‡çš„å®šé‡è¯„ä¼°æ˜¯ç¡®ä¿ç³»ç»Ÿæ€§èƒ½çš„å…³é”®ç¯èŠ‚ã€‚æˆ‘ä»¬éœ€è¦ä»å¤šä¸ªç»´åº¦å…¨é¢è¯„ä¼°æ ‡å®šç»“æœã€‚</p>
<h4 id="1_1">1. é‡æŠ•å½±è¯¯å·®åˆ†æ</h4>
<p><strong>åŸºç¡€é‡æŠ•å½±è¯¯å·®ï¼š</strong></p>
<p>å°†æ¿€å…‰ç‚¹æŠ•å½±åˆ°ç›¸æœºå›¾åƒï¼Œè®¡ç®—åƒç´ è¯¯å·®ï¼š
$$e_{reproj} = \frac{1}{N}\sum_{i=1}^{N} |u_i - \pi(K[R|t]p_i^{lidar})|$$
<strong>è¯¯å·®åˆ†å¸ƒåˆ†æï¼š</strong></p>
<p>ä¸ä»…å…³æ³¨å‡å€¼ï¼Œè¿˜è¦åˆ†æè¯¯å·®åˆ†å¸ƒï¼š</p>
<ul>
<li>å‡å€¼ï¼š$\mu_e &lt; 2$ pixels</li>
<li>æ ‡å‡†å·®ï¼š$\sigma_e &lt; 1$ pixel</li>
<li>95%åˆ†ä½æ•°ï¼š$e_{95} &lt; 3$ pixels</li>
<li>æœ€å¤§è¯¯å·®ï¼š$e_{max} &lt; 5$ pixels</li>
</ul>
<p><strong>ç©ºé—´è¯¯å·®åˆ†å¸ƒå›¾ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ç”Ÿæˆè¯¯å·®çƒ­å›¾</span>
<span class="k">def</span> <span class="nf">visualize_reprojection_error</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span> <span class="n">image_size</span><span class="p">):</span>
    <span class="n">error_map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">image_size</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">error_map</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">u</span><span class="p">)]</span> <span class="o">=</span> <span class="n">error</span>

    <span class="c1"># é«˜æ–¯å¹³æ»‘</span>
    <span class="n">error_map</span> <span class="o">=</span> <span class="n">gaussian_filter</span><span class="p">(</span><span class="n">error_map</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1"># å¯è§†åŒ–</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">error_map</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;hot&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Reprojection Error (pixels)&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>è¾¹ç¼˜æ•ˆåº”è¡¥å¿ï¼š</strong></p>
<p>å›¾åƒè¾¹ç¼˜é€šå¸¸è¯¯å·®è¾ƒå¤§ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†ï¼š
$$w(u,v) = \exp(-\frac{d_{edge}^2}{2\sigma_{edge}^2})$$
å…¶ä¸­$d_{edge}$æ˜¯åˆ°æœ€è¿‘å›¾åƒè¾¹ç¼˜çš„è·ç¦»ã€‚</p>
<h4 id="2_1">2. ç‚¹äº‘é‡å ä¸€è‡´æ€§</h4>
<p><strong>åŸºç¡€ä¸€è‡´æ€§åº¦é‡ï¼š</strong>
$$e_{overlap} = \frac{1}{N}\sum_{i=1}^{N} \min_{j} |p_i^{lidar1} - T_{lidar2}^{lidar1} \cdot p_j^{lidar2}|$$
<strong>æ”¹è¿›çš„ä¸€è‡´æ€§åº¦é‡ï¼š</strong></p>
<ol>
<li>
<p><strong>åŒå‘ä¸€è‡´æ€§</strong>
$$e_{bidirect} = \frac{1}{2}(e_{1\to2} + e_{2\to1})$$</p>
</li>
<li>
<p><strong>æ³•å‘é‡ä¸€è‡´æ€§</strong>
$$e_{normal} = \frac{1}{N}\sum_{i=1}^{N} |1 - n_i^{lidar1} \cdot (R_{lidar2}^{lidar1} \cdot n_j^{lidar2})|$$</p>
</li>
<li>
<p><strong>å¼ºåº¦ä¸€è‡´æ€§</strong>
$$e_{intensity} = \frac{1}{N}\sum_{i=1}^{N} |I_i^{lidar1} - I_j^{lidar2}|/\max(I_i, I_j)$$
<strong>ç»¼åˆä¸€è‡´æ€§æŒ‡æ ‡ï¼š</strong>
$$E_{consistency} = w_1 e_{overlap} + w_2 e_{normal} + w_3 e_{intensity}$$
ç›®æ ‡å€¼ï¼š</p>
</li>
</ol>
<ul>
<li>è¿‘è·ç¦»ï¼ˆ&lt;30mï¼‰ï¼š$E_{consistency} &lt; 3cm$</li>
<li>ä¸­è·ç¦»ï¼ˆ30-50mï¼‰ï¼š$E_{consistency} &lt; 5cm$</li>
<li>è¿œè·ç¦»ï¼ˆ&gt;50mï¼‰ï¼š$E_{consistency} &lt; 10cm$</li>
</ul>
<h4 id="3_1">3. é—­ç¯ä¸€è‡´æ€§æ£€éªŒ</h4>
<p><strong>åŸºç¡€é—­ç¯è¯¯å·®ï¼š</strong>
$$e_{loop} = |T_1^2 \cdot T_2^3 \cdot ... \cdot T_n^1 - I|_F$$
<strong>åˆ†è§£åˆ†æï¼š</strong></p>
<ul>
<li>å¹³ç§»åˆ†é‡ï¼š$e_{trans} = |t_{loop}|$</li>
<li>æ—‹è½¬åˆ†é‡ï¼š$e_{rot} = \arccos\frac{tr(R_{loop})-1}{2}$</li>
</ul>
<p><strong>è¯¯å·®ç´¯ç§¯æ¨¡å‹ï¼š</strong>
$$\sigma_{loop}^2 = \sum_{i=1}^{n} J_i \Sigma_i J_i^T$$
å…¶ä¸­$J_i$æ˜¯ç¬¬iä¸ªå˜æ¢çš„é›…å¯æ¯”çŸ©é˜µã€‚</p>
<h4 id="4_1">4. åŠ¨æ€éªŒè¯</h4>
<p><strong>è¿åŠ¨ä¸€è‡´æ€§æµ‹è¯•ï¼š</strong></p>
<p>åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­éªŒè¯æ ‡å®šç¨³å®šæ€§ï¼š
$$e_{motion} = \frac{1}{T}\int_0^T |v_{lidar} - R \cdot v_{base}| dt$$
å…¶ä¸­$v$è¡¨ç¤ºé€Ÿåº¦å‘é‡ã€‚</p>
<p><strong>æŒ¯åŠ¨é²æ£’æ€§ï¼š</strong></p>
<p>æ·»åŠ æ§åˆ¶æŒ¯åŠ¨ï¼Œæµ‹è¯•æ ‡å®šé€€åŒ–ï¼š</p>
<div class="codehilite"><pre><span></span><code>æŒ¯åŠ¨é¢‘ç‡èŒƒå›´ï¼š10-100Hz
æŒ¯åŠ¨å¹…åº¦ï¼š0.1g - 2g
è¯„ä¼°æŒ‡æ ‡ï¼šæ ‡å®šå‚æ•°å˜åŒ–é‡
</code></pre></div>

<h3 id="1028">10.2.8 ç‰¹æ®Šåœºæ™¯çš„å¤–å‚æ ‡å®š</h3>
<h4 id="1_2">1. æ— é‡å è§†é‡çš„å¤šä¼ æ„Ÿå™¨æ ‡å®š</h4>
<p>å½“ä¼ æ„Ÿå™¨é—´æ²¡æœ‰ç›´æ¥é‡å æ—¶ï¼Œéœ€è¦å€ŸåŠ©ä¸­é—´å‚è€ƒï¼š</p>
<p><strong>æ–¹æ³•1ï¼šä½¿ç”¨è¿åŠ¨çº¦æŸ</strong>
$$T_{AB} = (T_{A}^{W}(t_2))^{-1} \cdot T_{A}^{W}(t_1) \cdot T_{B}^{W}(t_1) \cdot (T_{B}^{W}(t_2))^{-1}$$
<strong>æ–¹æ³•2ï¼šæ ‡å®šç‰©ä¼ é€’</strong></p>
<ul>
<li>ä½¿ç”¨å¯ç§»åŠ¨çš„æ ‡å®šæ¿</li>
<li>åˆ†æ—¶è§‚æµ‹åŒä¸€æ ‡å®šç‰©</li>
<li>é€šè¿‡æ ‡å®šç‰©åæ ‡ç³»ä¼ é€’</li>
</ul>
<h4 id="2_2">2. éåˆšä½“å¹³å°æ ‡å®š</h4>
<p>å¯¹äºæŸ”æ€§å¹³å°ï¼ˆå¦‚æ— äººæœºï¼‰ï¼Œè€ƒè™‘å½¢å˜ï¼š</p>
<p><strong>å½¢å˜æ¨¡å‹ï¼š</strong>
$$T_{dynamic}(t) = T_{static} \cdot \exp(\sum_{i=1}^{n} a_i(t) \xi_i)$$
å…¶ä¸­$\xi_i$æ˜¯å½¢å˜æ¨¡æ€çš„æä»£æ•°è¡¨ç¤ºã€‚</p>
<p><strong>è‡ªé€‚åº”è¡¥å¿ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">FlexiblePlatformCalibration</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">static_transform</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deformation_modes</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imu_data</span><span class="p">,</span> <span class="n">strain_gauge_data</span><span class="p">):</span>
        <span class="c1"># ä¼°è®¡å½“å‰å½¢å˜</span>
        <span class="n">deformation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_deformation</span><span class="p">(</span>
            <span class="n">imu_data</span><span class="p">,</span> 
            <span class="n">strain_gauge_data</span>
        <span class="p">)</span>

        <span class="c1"># æ›´æ–°å˜æ¢çŸ©é˜µ</span>
        <span class="n">T_current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_transform</span> <span class="o">@</span> <span class="n">expm</span><span class="p">(</span><span class="n">deformation</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">T_current</span>
</code></pre></div>

<h4 id="3_2">3. å¤§å°ºåº¦ç³»ç»Ÿæ ‡å®š</h4>
<p>å¯¹äºå¤§å‹ç³»ç»Ÿï¼ˆå¦‚æ¸¯å£èµ·é‡æœºï¼‰ï¼Œä¼ ç»Ÿæ–¹æ³•ä¸é€‚ç”¨ï¼š</p>
<p><strong>åˆ†å¸ƒå¼æ ‡å®šç­–ç•¥ï¼š</strong></p>
<ol>
<li>å±€éƒ¨æ ‡å®šï¼šç›¸é‚»ä¼ æ„Ÿå™¨é—´çš„æ ‡å®š</li>
<li>å…¨å±€ä¼˜åŒ–ï¼šé€šè¿‡å›¾ä¼˜åŒ–ç»Ÿä¸€æ‰€æœ‰å±€éƒ¨æ ‡å®š</li>
<li>å‚è€ƒç‚¹çº¦æŸï¼šä½¿ç”¨GPSæˆ–å·²çŸ¥åœ°æ ‡</li>
</ol>
<p><strong>å°ºåº¦ä¼°è®¡ï¼š</strong>
$$s = \arg\min_s \sum_{i,j} |s \cdot d_{measured}^{ij} - d_{true}^{ij}|^2$$</p>
<h3 id="1029">10.2.9 å¤–å‚æ ‡å®šçš„è‡ªåŠ¨åŒ–å·¥å…·</h3>
<h4 id="1_3">1. æ ‡å®šè§„åˆ’å™¨</h4>
<p>è‡ªåŠ¨ç”Ÿæˆæœ€ä¼˜æ ‡å®šè½¨è¿¹ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CalibrationPlanner</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sensor_config</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sensors</span> <span class="o">=</span> <span class="n">sensor_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trajectory</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">plan_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ç›®æ ‡ï¼šæœ€å¤§åŒ–ä¿¡æ¯å¢ç›Š</span>
        <span class="n">information_gain</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">while</span> <span class="n">information_gain</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
            <span class="c1"># é€‰æ‹©ä¸‹ä¸€ä¸ªæœ€ä¼˜ä½ç½®</span>
            <span class="n">next_pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_next_pose</span><span class="p">()</span>

            <span class="c1"># è®¡ç®—é¢„æœŸä¿¡æ¯å¢ç›Š</span>
            <span class="n">H</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fisher_information</span><span class="p">(</span><span class="n">next_pose</span><span class="p">)</span>
            <span class="n">information_gain</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">H</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_pose</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory</span>
</code></pre></div>

<h4 id="2_3">2. å®æ—¶æ ‡å®šç›‘æ§</h4>
<p><strong>åœ¨çº¿è´¨é‡æŒ‡æ ‡ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CalibrationMonitor</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quality_history</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alert_threshold</span> <span class="o">=</span> <span class="mf">0.8</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sensor_data</span><span class="p">):</span>
        <span class="c1"># è®¡ç®—å½“å‰è´¨é‡æŒ‡æ ‡</span>
        <span class="n">quality</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_quality_metrics</span><span class="p">(</span><span class="n">sensor_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quality_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quality</span><span class="p">)</span>

        <span class="c1"># è¶‹åŠ¿åˆ†æ</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quality_history</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="n">trend</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> 
                              <span class="bp">self</span><span class="o">.</span><span class="n">quality_history</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">:],</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">trend</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.001</span><span class="p">:</span>  <span class="c1"># è´¨é‡ä¸‹é™</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">trigger_recalibration</span><span class="p">()</span>

        <span class="c1"># å³æ—¶è­¦æŠ¥</span>
        <span class="k">if</span> <span class="n">quality</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">alert_threshold</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_alert</span><span class="p">(</span><span class="s2">&quot;Calibration quality degraded&quot;</span><span class="p">)</span>
</code></pre></div>

<h4 id="3_3">3. æ ‡å®šç»“æœå¯è§†åŒ–</h4>
<p><strong>3Då¯è§†åŒ–å·¥å…·ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">visualize_calibration_result</span><span class="p">(</span><span class="n">transforms</span><span class="p">,</span> <span class="n">point_clouds</span><span class="p">):</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>

    <span class="n">colors</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">rainbow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">point_clouds</span><span class="p">)))</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">transforms</span><span class="p">,</span> <span class="n">point_clouds</span><span class="p">)):</span>
        <span class="c1"># å˜æ¢ç‚¹äº‘</span>
        <span class="n">points_transformed</span> <span class="o">=</span> <span class="n">transform_points</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>

        <span class="c1"># ä¸‹é‡‡æ ·æ˜¾ç¤º</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">),</span> 
                                 <span class="n">size</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)),</span> 
                                 <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">points_transformed</span><span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="n">points_transformed</span><span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                  <span class="n">points_transformed</span><span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                  <span class="n">c</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="c1"># æ˜¾ç¤ºåæ ‡ç³»</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transforms</span><span class="p">):</span>
        <span class="n">draw_coordinate_frame</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> 
                            <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Sensor</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;X (m)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Y (m)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s1">&#39;Z (m)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<h3 id="10210">10.2.10 å·¥ä¸šåº”ç”¨æ¡ˆä¾‹</h3>
<h4 id="1_4">æ¡ˆä¾‹1ï¼šè‡ªåŠ¨é©¾é©¶è½¦è¾†æ ‡å®š</h4>
<p><strong>ç³»ç»Ÿé…ç½®ï¼š</strong></p>
<ul>
<li>4ä¸ªè§’é›·è¾¾ï¼ˆContinental ARS408ï¼‰</li>
<li>1ä¸ªå‰å‘æ¿€å…‰é›·è¾¾ï¼ˆVelodyne VLS-128ï¼‰</li>
<li>6ä¸ªç›¸æœºï¼ˆå‰å‘3ä¸ªï¼Œç¯è§†3ä¸ªï¼‰</li>
<li>1ä¸ªé«˜ç²¾åº¦IMU/GNSS</li>
</ul>
<p><strong>æ ‡å®šæµç¨‹ï¼š</strong></p>
<ol>
<li>é™æ€åˆå§‹æ ‡å®šï¼ˆæ ‡å®šåœºï¼‰</li>
<li>åŠ¨æ€ç²¾ç»†åŒ–ï¼ˆæµ‹è¯•é“è·¯ï¼‰</li>
<li>åœ¨çº¿è‡ªæ ‡å®šï¼ˆæ—¥å¸¸è¿è¡Œï¼‰</li>
</ol>
<p><strong>æ ‡å®šç»“æœï¼š</strong></p>
<ul>
<li>æ¿€å…‰é›·è¾¾-ç›¸æœºï¼šé‡æŠ•å½±è¯¯å·® 1.2 pixels</li>
<li>æ¿€å…‰é›·è¾¾-æ¯«ç±³æ³¢ï¼šç‚¹äº‘èåˆè¯¯å·® &lt;5cm</li>
<li>ç³»ç»Ÿæ•´ä½“å®šä½ç²¾åº¦ï¼š10cm (åŸå¸‚ç¯å¢ƒ)</li>
</ul>
<h4 id="2_4">æ¡ˆä¾‹2ï¼šå·¥ä¸šæœºå™¨äººæ ‡å®š</h4>
<p><strong>æŒ‘æˆ˜ï¼š</strong></p>
<ul>
<li>æœºæ¢°è‡‚è¿åŠ¨å¼•èµ·çš„æŒ¯åŠ¨</li>
<li>é«˜ç²¾åº¦è¦æ±‚ï¼ˆ&lt;1mmï¼‰</li>
<li>å®æ—¶æ€§è¦æ±‚ï¼ˆ&lt;10mså»¶è¿Ÿï¼‰</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>æŒ¯åŠ¨è¡¥å¿æ¨¡å‹</li>
<li>é«˜é¢‘IMUæ•°æ®èåˆ</li>
<li>é¢„æµ‹æ€§è¡¥å¿ç®—æ³•</li>
</ol>
<p><strong>å®æ–½æ•ˆæœï¼š</strong></p>
<ul>
<li>é™æ€ç²¾åº¦ï¼š0.8mm</li>
<li>åŠ¨æ€ç²¾åº¦ï¼š1.5mm</li>
<li>æ ‡å®šæ—¶é—´ï¼šä»4å°æ—¶ç¼©çŸ­è‡³30åˆ†é’Ÿ</li>
</ul>
<h2 id="103">10.3 åœ¨çº¿è‡ªæ ‡å®š</h2>
<p>åœ¨çº¿è‡ªæ ‡å®šæŠ€æœ¯ä½¿æ¿€å…‰é›·è¾¾ç³»ç»Ÿèƒ½å¤Ÿåœ¨è¿è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨æ£€æµ‹å’Œè¡¥å¿æ ‡å®šå‚æ•°çš„å˜åŒ–ï¼Œæ— éœ€ä¸“é—¨çš„æ ‡å®šè®¾å¤‡å’Œæµç¨‹ã€‚è¿™å¯¹äºé•¿æœŸè¿è¡Œçš„è‡ªåŠ¨é©¾é©¶è½¦è¾†å’Œæœºå™¨äººç³»ç»Ÿå°¤ä¸ºé‡è¦ã€‚</p>
<h3 id="1031-slam">10.3.1 SLAMåé¦ˆæ ¡æ­£</h3>
<p>åˆ©ç”¨SLAMç®—æ³•çš„ä¼˜åŒ–ç»“æœåå‘æ ¡æ­£ä¼ æ„Ÿå™¨å‚æ•°ï¼š</p>
<p><strong>åŸç†ï¼š</strong>
SLAMæ„å»ºçš„åœ°å›¾è´¨é‡ç›´æ¥åæ˜ æ ‡å®šç²¾åº¦ã€‚é€šè¿‡æœ€å°åŒ–åœ°å›¾ä¸ä¸€è‡´æ€§æ¥ä¼˜åŒ–æ ‡å®šå‚æ•°ã€‚</p>
<p><strong>å®ç°æ¡†æ¶ï¼š</strong></p>
<ol>
<li><strong>æ‰©å±•çŠ¶æ€å‘é‡</strong></li>
</ol>
<p>å°†æ ‡å®šå‚æ•°åŠ å…¥SLAMçŠ¶æ€ï¼š
$$X = [x_1, ..., x_n, \theta_{calib}]^T$$
å…¶ä¸­$x_i$ä¸ºä½å§¿ï¼Œ$\theta_{calib}$ä¸ºæ ‡å®šå‚æ•°ã€‚</p>
<ol start="2">
<li><strong>è”åˆä¼˜åŒ–</strong></li>
</ol>
<p>æˆæœ¬å‡½æ•°ï¼š
$$J = \sum_{i,j} e_{ij}^T \Omega_{ij} e_{ij} + \sum_k e_k^T \Lambda_k e_k$$
ç¬¬ä¸€é¡¹ä¸ºä½å§¿çº¦æŸï¼Œç¬¬äºŒé¡¹ä¸ºè§‚æµ‹çº¦æŸã€‚</p>
<ol start="3">
<li><strong>åœ¨çº¿æ›´æ–°</strong></li>
</ol>
<p>ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼Œä»…ä¼˜åŒ–æœ€è¿‘Nå¸§ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">while</span><span class="ss">(</span>è¿è¡Œä¸­<span class="ss">)</span>:
<span class="w">    </span>æ–°å»ºå…³é”®å¸§
<span class="w">    </span><span class="k">if</span><span class="w"> </span>å…³é”®å¸§æ•°<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">N</span>:
<span class="w">        </span>æ„å»ºå±€éƒ¨å›¾ä¼˜åŒ–é—®é¢˜
<span class="w">        </span>ä¼˜åŒ–ä½å§¿å’Œæ ‡å®šå‚æ•°
<span class="w">        </span>æ›´æ–°å…¨å±€æ ‡å®šå€¼
</code></pre></div>

<p><strong>å®ä¾‹ï¼šå¤–å‚åœ¨çº¿æ ¡æ­£</strong></p>
<p>æŸè‡ªåŠ¨é©¾é©¶è½¦è¾†è¿è¡Œ1000kmåï¼Œé€šè¿‡SLAMåé¦ˆå‘ç°ï¼š</p>
<ul>
<li>Yawè§’æ¼‚ç§»ï¼š0.15Â°ï¼ˆç”±äºå®‰è£…æ¾åŠ¨ï¼‰</li>
<li>Zè½´åç§»ï¼š8mmï¼ˆç”±äºæ‚¬æŒ‚ç³»ç»Ÿå˜åŒ–ï¼‰</li>
</ul>
<p>è‡ªåŠ¨æ ¡æ­£åï¼Œå®šä½ç²¾åº¦ä»15cmæå‡è‡³5cmã€‚</p>
<h3 id="1032">10.3.2 å¹³é¢ç‰¹å¾æå–ä¸åˆ©ç”¨</h3>
<p>åŸå¸‚ç¯å¢ƒä¸­å­˜åœ¨å¤§é‡å¹³é¢ç‰¹å¾ï¼ˆåœ°é¢ã€å¢™é¢ã€æ ‡å¿—ç‰Œï¼‰ï¼Œå¯ç”¨äºåœ¨çº¿æ ‡å®šï¼š</p>
<p><strong>åœ°é¢çº¦æŸï¼š</strong></p>
<p>å‡è®¾åœ°é¢æ–¹ç¨‹ä¸º$ax + by + cz + d = 0$ï¼Œå½’ä¸€åŒ–å$c = -1$ï¼š
$$z = ax + by + d$$
å¯¹äºæ­£ç¡®æ ‡å®šçš„ç³»ç»Ÿï¼Œåœ°é¢ç‚¹åº”æ»¡è¶³æ­¤çº¦æŸã€‚æ„å»ºä¼˜åŒ–é—®é¢˜ï¼š
$$\min_{\theta_{calib}} \sum_{i \in ground} (ax_i + by_i + z_i - d)^2$$
<strong>å‚ç›´é¢çº¦æŸï¼š</strong></p>
<p>å»ºç­‘ç‰©ç«‹é¢é€šå¸¸å‚ç›´äºåœ°é¢ï¼š
$$n_{wall} \cdot n_{ground} = 0$$
åˆ©ç”¨æ­¤çº¦æŸæ ¡æ­£Rollå’ŒPitchè§’ã€‚</p>
<p><strong>å®æ—¶å¹³é¢æ£€æµ‹ç®—æ³•ï¼š</strong></p>
<ol>
<li><strong>ä½“ç´ é™é‡‡æ ·</strong>ï¼šå‡å°‘è®¡ç®—é‡</li>
<li><strong>æ³•å‘é‡ä¼°è®¡</strong>ï¼šä½¿ç”¨PCAè®¡ç®—æ¯ç‚¹çš„æ³•å‘é‡</li>
<li><strong>åŒºåŸŸç”Ÿé•¿</strong>ï¼šç›¸ä¼¼æ³•å‘é‡çš„ç‚¹èšç±»</li>
<li><strong>RANSACæ‹Ÿåˆ</strong>ï¼šé²æ£’çš„å¹³é¢å‚æ•°ä¼°è®¡</li>
</ol>
<div class="codehilite"><pre><span></span><code>å¹³é¢æ£€æµ‹ä¼ªä»£ç ï¼š
<span class="k">for</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span>ä½“ç´ :
<span class="w">    </span>è®¡ç®—åæ–¹å·®çŸ©é˜µ
<span class="w">    </span>ç‰¹å¾å€¼åˆ†è§£å¾—åˆ°æ³•å‘é‡
<span class="w">    </span><span class="k">if</span><span class="w"> </span>æœ€å°ç‰¹å¾å€¼<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>é˜ˆå€¼:
<span class="w">        </span>æ ‡è®°ä¸ºå¹³é¢å€™é€‰ç‚¹
ä½¿ç”¨åŒºåŸŸç”Ÿé•¿èšç±»å¹³é¢ç‚¹
<span class="nv">RANSAC</span>æ‹Ÿåˆå¹³é¢å‚æ•°
</code></pre></div>

<h3 id="1033">10.3.3 æ ‡å®šè´¨é‡æŒ‡æ ‡</h3>
<ol>
<li><strong>ç‚¹äº‘é…å‡†æ®‹å·®</strong></li>
</ol>
<p>å®šä¹‰ç¬æ—¶é…å‡†è´¨é‡ï¼š
$$Q_{reg}(t) = \frac{1}{\sqrt{\frac{1}{N}\sum_{i=1}^{N} d_i^2}}$$
å…¶ä¸­$d_i$ä¸ºæœ€è¿‘ç‚¹è·ç¦»ã€‚$Q_{reg}$ä¸‹é™è¡¨ç¤ºæ ‡å®šé€€åŒ–ã€‚</p>
<ol start="2">
<li>
<p><strong>å¹³é¢æ‹Ÿåˆæ®‹å·®</strong>
$$Q_{plane}(t) = \frac{1}{\sigma_{plane}}$$
$\sigma_{plane}$ä¸ºå¹³é¢æ‹Ÿåˆçš„æ ‡å‡†å·®ã€‚</p>
</li>
<li>
<p><strong>é‡å¤è§‚æµ‹ä¸€è‡´æ€§</strong></p>
</li>
</ol>
<p>å¯¹äºé™æ€åœºæ™¯çš„é‡å¤è§‚æµ‹ï¼š
$$Q_{repeat}(t) = \exp(-\frac{|P_t - P_{t-\Delta t}|_F}{\sigma_0})$$
<strong>ç»¼åˆè´¨é‡æŒ‡æ ‡ï¼š</strong>
$$Q_{total} = w_1 Q_{reg} + w_2 Q_{plane} + w_3 Q_{repeat}$$
å½“$Q_{total} &lt; Q_{threshold}$æ—¶è§¦å‘é‡æ–°æ ‡å®šã€‚</p>
<h3 id="1034">10.3.4 è‡ªé€‚åº”æ ‡å®šè§¦å‘æœºåˆ¶</h3>
<ol>
<li><strong>é˜ˆå€¼è§¦å‘</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>if Q_total &lt; 0.8:
    è§¦å‘ç²¾ç»†æ ‡å®š
elif Q_total &lt; 0.9:
    è§¦å‘å¿«é€Ÿæ ‡å®š
</code></pre></div>

<ol start="2">
<li>
<p><strong>å‘¨æœŸæ€§æ£€æŸ¥</strong>
- æ¯è¿è¡Œ100kmæ‰§è¡Œå¿«é€Ÿæ£€æŸ¥
- æ¯è¿è¡Œ1000kmæ‰§è¡Œå®Œæ•´æ ‡å®šéªŒè¯</p>
</li>
<li>
<p><strong>äº‹ä»¶è§¦å‘</strong>
- æ£€æµ‹åˆ°å‰§çƒˆæŒ¯åŠ¨ï¼ˆIMUæ•°æ®ï¼‰
- æ¸©åº¦å˜åŒ–è¶…è¿‡20Â°C
- ç³»ç»Ÿé‡å¯å</p>
</li>
</ol>
<h3 id="1035">10.3.5 å¿«é€Ÿåœ¨çº¿æ ‡å®šç®—æ³•</h3>
<p><strong>æœ€å°å‚æ•°åŒ–æ–¹æ³•ï¼š</strong></p>
<p>ä»…ä¼˜åŒ–æœ€å¯èƒ½å˜åŒ–çš„å‚æ•°ï¼ˆå¦‚zè½´é«˜åº¦å’Œyawè§’ï¼‰ï¼š
$$\theta_{quick} = [z, \psi]^T$$
ä¼˜åŒ–é—®é¢˜ç®€åŒ–ä¸º2Dï¼š
$$\min_{z,\psi} \sum_i |p_i^{transformed} - p_i^{reference}|^2$$
ä½¿ç”¨ç‰›é¡¿æ³•å¿«é€Ÿæ”¶æ•›ï¼š
$$\theta_{k+1} = \theta_k - \alpha H^{-1} g$$
å…¶ä¸­$H$ä¸ºHessiançŸ©é˜µï¼Œ$g$ä¸ºæ¢¯åº¦ã€‚</p>
<p><strong>è®¡ç®—ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨kd-treeåŠ é€Ÿæœ€è¿‘é‚»æœç´¢</li>
<li>GPUå¹¶è¡Œè®¡ç®—ç‚¹äº‘å˜æ¢</li>
<li>ä»…ä½¿ç”¨å…³é”®ç‚¹ï¼ˆcorner, edge featuresï¼‰</li>
</ul>
<p>å…¸å‹è¿è¡Œæ—¶é—´ï¼š&lt;100ms/å¸§</p>
<h3 id="1036">10.3.6 å¤šä¼ æ„Ÿå™¨ååŒæ ‡å®š</h3>
<p><strong>æ¿€å…‰é›·è¾¾-IMUååŒï¼š</strong></p>
<p>IMUæä¾›é«˜é¢‘å§¿æ€ä¿¡æ¯ï¼Œç”¨äºæ£€æµ‹æ ‡å®šå˜åŒ–ï¼š
$$\Delta R_{lidar} = R_{IMU}(t_2) \cdot R_{IMU}^{-1}(t_1) \cdot \Delta R_{measured}^{-1}$$
ç†æƒ³æƒ…å†µ$\Delta R_{lidar} = I$ï¼Œåå·®è¡¨ç¤ºå¤–å‚å˜åŒ–ã€‚</p>
<p><strong>æ¿€å…‰é›·è¾¾-ç›¸æœºååŒï¼š</strong></p>
<p>åˆ©ç”¨è¯­ä¹‰ä¿¡æ¯æå‡æ ‡å®šç²¾åº¦ï¼š</p>
<ol>
<li>ç›¸æœºè¯†åˆ«è½¦é“çº¿ã€äº¤é€šæ ‡å¿—</li>
<li>æ¿€å…‰é›·è¾¾æå–å¯¹åº”å‡ ä½•ç‰¹å¾</li>
<li>æœ€å°åŒ–è¯­ä¹‰-å‡ ä½•å¯¹åº”è¯¯å·®</li>
</ol>
<h3 id="1037">10.3.7 æ ‡å®šå‚æ•°å­˜å‚¨ä¸ç®¡ç†</h3>
<p><strong>ç‰ˆæœ¬æ§åˆ¶ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;calibration_history&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.2.3&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.8</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;rotation_euler&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.02</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;trigger&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;periodic&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;validation_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;reprojection_error&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;overlap_consistency&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>å‚æ•°å¹³æ»‘ï¼š</strong></p>
<p>é¿å…æ ‡å®šå‚æ•°çªå˜ï¼š
$$\theta_{applied} = \alpha \theta_{new} + (1-\alpha) \theta_{old}$$
å…¶ä¸­$\alpha = \min(1, \frac{\Delta t}{\tau})$ï¼Œ$\tau$ä¸ºæ—¶é—´å¸¸æ•°ã€‚</p>
<h3 id="1038">10.3.8 æ·±åº¦å­¦ä¹ é©±åŠ¨çš„è‡ªæ ‡å®š</h3>
<p>ç°ä»£æ·±åº¦å­¦ä¹ æŠ€æœ¯ä¸ºåœ¨çº¿è‡ªæ ‡å®šæä¾›äº†æ–°çš„å¯èƒ½æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚åœºæ™¯å’Œéçº¿æ€§è¯¯å·®æ–¹é¢ã€‚</p>
<h4 id="1_5">1. åŸºäºå­¦ä¹ çš„æ ‡å®šè´¨é‡è¯„ä¼°</h4>
<p><strong>ç½‘ç»œæ¶æ„è®¾è®¡ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CalibrationQualityNet</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1"># ç‚¹äº‘ç‰¹å¾æå–å™¨</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_encoder</span> <span class="o">=</span> <span class="n">PointNet2MSG</span><span class="p">()</span>

        <span class="c1"># æ—¶åºç‰¹å¾æå–å™¨</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temporal_encoder</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span>
            <span class="n">input_size</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> 
            <span class="n">hidden_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> 
            <span class="n">num_layers</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

        <span class="c1"># è´¨é‡é¢„æµ‹å¤´</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quality_head</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Dropout</span><span class="p">(</span><span class="mf">0.3</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Sigmoid</span><span class="p">()</span>  <span class="c1"># è¾“å‡º0-1è´¨é‡åˆ†æ•°</span>
        <span class="p">)</span>

        <span class="c1"># å‚æ•°è°ƒæ•´å¤´</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">correction_head</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1"># 6-DOFè°ƒæ•´é‡</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_clouds_sequence</span><span class="p">):</span>
        <span class="c1"># æå–æ¯å¸§ç‰¹å¾</span>
        <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pc</span> <span class="ow">in</span> <span class="n">point_clouds_sequence</span><span class="p">:</span>
            <span class="n">feat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_encoder</span><span class="p">(</span><span class="n">pc</span><span class="p">)</span>
            <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feat</span><span class="p">)</span>

        <span class="c1"># æ—¶åºèåˆ</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">lstm_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporal_encoder</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>

        <span class="c1"># å…¨å±€æ± åŒ–</span>
        <span class="n">global_feat</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">lstm_out</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># é¢„æµ‹è´¨é‡å’Œè°ƒæ•´é‡</span>
        <span class="n">quality</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quality_head</span><span class="p">(</span><span class="n">global_feat</span><span class="p">)</span>
        <span class="n">correction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">correction_head</span><span class="p">(</span><span class="n">global_feat</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">quality</span><span class="p">,</span> <span class="n">correction</span>
</code></pre></div>

<p><strong>è®­ç»ƒç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>æ•°æ®ç”Ÿæˆ</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_training_data</span><span class="p">():</span>
    <span class="c1"># æ·»åŠ å„ç§æ ‡å®šè¯¯å·®</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;translation&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
        <span class="s1">&#39;rotation&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
        <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.98</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1"># ç”Ÿæˆæ‰°åŠ¨åçš„ç‚¹äº‘</span>
    <span class="n">disturbed_pc</span> <span class="o">=</span> <span class="n">apply_calibration_error</span><span class="p">(</span>
        <span class="n">original_pc</span><span class="p">,</span> <span class="n">errors</span>
    <span class="p">)</span>

    <span class="c1"># è®¡ç®—è´¨é‡æ ‡ç­¾</span>
    <span class="n">quality_label</span> <span class="o">=</span> <span class="n">compute_quality_score</span><span class="p">(</span>
        <span class="n">original_pc</span><span class="p">,</span> <span class="n">disturbed_pc</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">disturbed_pc</span><span class="p">,</span> <span class="n">quality_label</span><span class="p">,</span> <span class="n">errors</span>
</code></pre></div>

<ol start="2">
<li><strong>æŸå¤±å‡½æ•°è®¾è®¡</strong>
$$L_{total} = \lambda_1 L_{quality} + \lambda_2 L_{correction} + \lambda_3 L_{consistency}$$
å…¶ä¸­ï¼š</li>
</ol>
<ul>
<li>$L_{quality}$ï¼šè´¨é‡é¢„æµ‹çš„äºŒå…ƒäº¤å‰ç†µæŸå¤±</li>
<li>$L_{correction}$ï¼šå‚æ•°ä¿®æ­£çš„å›å½’æŸå¤±</li>
<li>$L_{consistency}$ï¼šæ—¶åºä¸€è‡´æ€§æŸå¤±</li>
</ul>
<h4 id="2_5">2. è‡ªç›‘ç£æ ‡å®šå­¦ä¹ </h4>
<p>åˆ©ç”¨åœºæ™¯çš„å‡ ä½•çº¦æŸè¿›è¡Œè‡ªç›‘ç£å­¦ä¹ ï¼š</p>
<p><strong>åœ°é¢çº¦æŸæŸå¤±ï¼š</strong>
$$L_{ground} = \sum_{p \in \mathcal{G}} (n_{ground}^T p + d)^2$$
<strong>å‚ç›´é¢çº¦æŸæŸå¤±ï¼š</strong>
$$L_{vertical} = \sum_{n \in \mathcal{V}} (1 - |n^T z_{up}|)^2$$
<strong>å¯¹ç§°æ€§çº¦æŸï¼š</strong>
å¯¹äºå…·æœ‰å¯¹ç§°æ€§çš„åœºæ™¯ï¼ˆå¦‚éš§é“ã€èµ°å»Šï¼‰ï¼š
$$L_{symmetry} = |P_{left} - \mathcal{F}(P_{right})|^2$$
å…¶ä¸­$\mathcal{F}$æ˜¯é•œåƒå˜æ¢ã€‚</p>
<h4 id="3_4">3. å…ƒå­¦ä¹ å¿«é€Ÿé€‚åº”</h4>
<p>ä½¿ç”¨MAMLï¼ˆModel-Agnostic Meta-Learningï¼‰å®ç°å¿«é€Ÿæ ‡å®šé€‚åº”ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MetaCalibration</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meta_model</span> <span class="o">=</span> <span class="n">CalibrationNet</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inner_lr</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outer_lr</span> <span class="o">=</span> <span class="mf">0.001</span>

    <span class="k">def</span> <span class="nf">meta_train</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_batch</span><span class="p">):</span>
        <span class="n">meta_grads</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">task_batch</span><span class="p">:</span>
            <span class="c1"># å†…å¾ªç¯ï¼šç‰¹å®šåœºæ™¯é€‚åº”</span>
            <span class="n">task_model</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meta_model</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>  <span class="c1"># 5æ­¥æ¢¯åº¦ä¸‹é™</span>
                <span class="n">loss</span> <span class="o">=</span> <span class="n">task_model</span><span class="o">.</span><span class="n">compute_loss</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">support_set</span><span class="p">)</span>
                <span class="n">grads</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">autograd</span><span class="o">.</span><span class="n">grad</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="n">task_model</span><span class="o">.</span><span class="n">parameters</span><span class="p">())</span>
                <span class="n">task_model</span><span class="o">.</span><span class="n">update_params</span><span class="p">(</span><span class="n">grads</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inner_lr</span><span class="p">)</span>

            <span class="c1"># è¯„ä¼°é€‚åº”åçš„æ€§èƒ½</span>
            <span class="n">meta_loss</span> <span class="o">=</span> <span class="n">task_model</span><span class="o">.</span><span class="n">compute_loss</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">query_set</span><span class="p">)</span>
            <span class="n">meta_grads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">autograd</span><span class="o">.</span><span class="n">grad</span><span class="p">(</span><span class="n">meta_loss</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta_model</span><span class="o">.</span><span class="n">parameters</span><span class="p">()))</span>

        <span class="c1"># å¤–å¾ªç¯ï¼šæ›´æ–°å…ƒæ¨¡å‹</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meta_optimizer</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">average_grads</span><span class="p">(</span><span class="n">meta_grads</span><span class="p">))</span>
</code></pre></div>

<h3 id="1039">10.3.9 é²æ£’æ€§å¢å¼ºæŠ€æœ¯</h3>
<h4 id="1_6">1. å¼‚å¸¸æ£€æµ‹ä¸å¤„ç†</h4>
<p><strong>åŸºäºç»Ÿè®¡çš„å¼‚å¸¸æ£€æµ‹ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">AnomalyDetector</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window_size</span> <span class="o">=</span> <span class="n">window_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">detect_anomaly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">calibration_params</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_size</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">calibration_params</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># è®¡ç®—é©¬æ°è·ç¦»</span>
        <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cov</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cov</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">,</span> <span class="n">rowvar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">diff</span> <span class="o">=</span> <span class="n">calibration_params</span> <span class="o">-</span> <span class="n">mean</span>
        <span class="n">mahalanobis_dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span> <span class="o">@</span> <span class="n">diff</span><span class="p">)</span>

        <span class="c1"># å¼‚å¸¸åˆ¤å®š</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">chi2</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># 6-DOF</span>

        <span class="k">if</span> <span class="n">mahalanobis_dist</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">calibration_params</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>

<p><strong>åŸºäºå­¦ä¹ çš„å¼‚å¸¸æ£€æµ‹ï¼š</strong></p>
<p>ä½¿ç”¨å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰æ£€æµ‹å¼‚å¸¸æ ‡å®šçŠ¶æ€ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CalibrationVAE</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">latent_dim</span><span class="o">=</span><span class="mi">32</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1"># ç¼–ç å™¨</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encoder</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">64</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fc_mu</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="n">latent_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fc_var</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="n">latent_dim</span><span class="p">)</span>

        <span class="c1"># è§£ç å™¨</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">latent_dim</span><span class="p">,</span> <span class="mi">64</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
            <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">reparameterize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">logvar</span><span class="p">):</span>
        <span class="n">std</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">logvar</span><span class="p">)</span>
        <span class="n">eps</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn_like</span><span class="p">(</span><span class="n">std</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mu</span> <span class="o">+</span> <span class="n">eps</span> <span class="o">*</span> <span class="n">std</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoder</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">mu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fc_mu</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="n">logvar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fc_var</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reparameterize</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">logvar</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="p">(</span><span class="n">z</span><span class="p">),</span> <span class="n">mu</span><span class="p">,</span> <span class="n">logvar</span>
</code></pre></div>

<h4 id="2_6">2. å¤šå‡è®¾è·Ÿè¸ª</h4>
<p>ç»´æŠ¤å¤šä¸ªæ ‡å®šå‡è®¾ï¼Œæ ¹æ®è§‚æµ‹åŠ¨æ€è°ƒæ•´æƒé‡ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MultiHypothesisCalibration</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_hypotheses</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hypotheses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">n_hypotheses</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_hypotheses</span>

        <span class="c1"># åˆå§‹åŒ–å‡è®¾</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_hypotheses</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hypotheses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">generate_hypothesis</span><span class="p">()</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observation</span><span class="p">):</span>
        <span class="c1"># è®¡ç®—æ¯ä¸ªå‡è®¾çš„ä¼¼ç„¶</span>
        <span class="n">likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">hyp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hypotheses</span><span class="p">:</span>
            <span class="n">likelihood</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_likelihood</span><span class="p">(</span>
                <span class="n">observation</span><span class="p">,</span> <span class="n">hyp</span>
            <span class="p">)</span>
            <span class="n">likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">likelihood</span><span class="p">)</span>

        <span class="c1"># æ›´æ–°æƒé‡</span>
        <span class="n">likelihoods</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">likelihoods</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">*=</span> <span class="n">likelihoods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

        <span class="c1"># é‡é‡‡æ ·ä½æƒé‡å‡è®¾</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resample</span><span class="p">()</span>

        <span class="c1"># è¿”å›åŠ æƒå¹³å‡ä¼°è®¡</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_weighted_estimate</span><span class="p">()</span>
</code></pre></div>

<h3 id="10310">10.3.10 å¤±è´¥ä¿æŠ¤æœºåˆ¶</h3>
<h4 id="1_7">1. å¤šå±‚æ¬¡éªŒè¯ç³»ç»Ÿ</h4>
<p><strong>Level 1 - å¿«é€Ÿåˆç†æ€§æ£€æŸ¥ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">quick_sanity_check</span><span class="p">(</span><span class="n">new_params</span><span class="p">,</span> <span class="n">old_params</span><span class="p">):</span>
    <span class="n">checks</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;translation&#39;</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_params</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">old_params</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># 10cm</span>
        <span class="s1">&#39;rotation&#39;</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_params</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="o">-</span> <span class="n">old_params</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.035</span><span class="p">,</span>   <span class="c1"># 2åº¦</span>
        <span class="s1">&#39;sudden_jump&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">new_params</span> <span class="o">-</span> <span class="n">old_params</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.15</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">checks</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">checks</span>
</code></pre></div>

<p><strong>Level 2 - å‡ ä½•ä¸€è‡´æ€§éªŒè¯ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">geometric_consistency_check</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">point_cloud</span><span class="p">):</span>
    <span class="c1"># æ£€æŸ¥åœ°é¢æ³•å‘é‡</span>
    <span class="n">ground_points</span> <span class="o">=</span> <span class="n">extract_ground</span><span class="p">(</span><span class="n">point_cloud</span><span class="p">)</span>
    <span class="n">ground_normal</span> <span class="o">=</span> <span class="n">fit_plane</span><span class="p">(</span><span class="n">ground_points</span><span class="p">)</span>

    <span class="c1"># å˜æ¢åˆ°è½¦ä½“åæ ‡ç³»</span>
    <span class="n">R</span> <span class="o">=</span> <span class="n">calibration_to_rotation</span><span class="p">(</span><span class="n">calibration</span><span class="p">)</span>
    <span class="n">ground_normal_vehicle</span> <span class="o">=</span> <span class="n">R</span> <span class="o">@</span> <span class="n">ground_normal</span>

    <span class="c1"># éªŒè¯æ˜¯å¦æ¥è¿‘å‚ç›´</span>
    <span class="n">verticality</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ground_normal_vehicle</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">verticality</span> <span class="o">&gt;</span> <span class="mf">0.98</span>  <span class="c1"># cos(10Â°)</span>
</code></pre></div>

<p><strong>Level 3 - äº¤å‰ä¼ æ„Ÿå™¨éªŒè¯ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">cross_sensor_validation</span><span class="p">(</span><span class="n">lidar_calib</span><span class="p">,</span> <span class="n">camera_calib</span><span class="p">,</span> <span class="n">imu_data</span><span class="p">):</span>
    <span class="c1"># ä½¿ç”¨IMUéªŒè¯æ—‹è½¬ä¸€è‡´æ€§</span>
    <span class="n">imu_rotation</span> <span class="o">=</span> <span class="n">integrate_gyro</span><span class="p">(</span><span class="n">imu_data</span><span class="p">)</span>
    <span class="n">lidar_rotation</span> <span class="o">=</span> <span class="n">extract_rotation_change</span><span class="p">(</span><span class="n">lidar_calib</span><span class="p">)</span>

    <span class="n">rotation_error</span> <span class="o">=</span> <span class="n">angle_between</span><span class="p">(</span><span class="n">imu_rotation</span><span class="p">,</span> <span class="n">lidar_rotation</span><span class="p">)</span>

    <span class="c1"># ä½¿ç”¨ç›¸æœºéªŒè¯å¹³ç§»</span>
    <span class="k">if</span> <span class="n">camera_calib</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">visual_translation</span> <span class="o">=</span> <span class="n">estimate_visual_odometry</span><span class="p">()</span>
        <span class="n">lidar_translation</span> <span class="o">=</span> <span class="n">extract_translation_change</span><span class="p">(</span><span class="n">lidar_calib</span><span class="p">)</span>

        <span class="n">translation_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
            <span class="n">visual_translation</span> <span class="o">-</span> <span class="n">lidar_translation</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">rotation_error</span> <span class="o">&lt;</span> <span class="mf">1.0</span> <span class="ow">and</span> <span class="n">translation_error</span> <span class="o">&lt;</span> <span class="mf">0.05</span>

    <span class="k">return</span> <span class="n">rotation_error</span> <span class="o">&lt;</span> <span class="mf">1.0</span>
</code></pre></div>

<h4 id="2_7">2. æ™ºèƒ½é™çº§ç­–ç•¥</h4>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CalibrationFallbackSystem</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strategies</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">OnlineOptimizedCalibration</span><span class="p">(),</span>
            <span class="n">FilteredHistoricalCalibration</span><span class="p">(),</span>
            <span class="n">FactoryCalibration</span><span class="p">(),</span>
            <span class="n">SafetyModeCalibration</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_level</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">get_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sensor_data</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_level</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">strategies</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">strategy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategies</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_level</span><span class="p">]</span>
                <span class="n">calib</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">sensor_data</span><span class="p">)</span>

                <span class="c1"># éªŒè¯æ ‡å®šè´¨é‡</span>
                <span class="n">quality</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assess_quality</span><span class="p">(</span><span class="n">calib</span><span class="p">,</span> <span class="n">sensor_data</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">quality</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>
                    <span class="c1"># å°è¯•æ¢å¤åˆ°æ›´é«˜çº§åˆ«</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_level</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">try_recovery</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">calib</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># é™çº§</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_level</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log_degradation</span><span class="p">()</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_level</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># æœ€åçš„å®‰å…¨æ¨¡å¼</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategies</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_safe_calibration</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">try_recovery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å°è¯•æ¢å¤åˆ°æ›´é«˜çº§åˆ«çš„æ ‡å®šç­–ç•¥&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recovery_conditions_met</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_level</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<h4 id="3_5">3. å®æ—¶ç›‘æ§ä¸æŠ¥è­¦</h4>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CalibrationHealthMonitor</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;reprojection_error&#39;</span><span class="p">:</span> <span class="n">CircularBuffer</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
            <span class="s1">&#39;point_cloud_alignment&#39;</span><span class="p">:</span> <span class="n">CircularBuffer</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
            <span class="s1">&#39;temporal_consistency&#39;</span><span class="p">:</span> <span class="n">CircularBuffer</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
            <span class="s1">&#39;cross_sensor_agreement&#39;</span><span class="p">:</span> <span class="n">CircularBuffer</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alert_manager</span> <span class="o">=</span> <span class="n">AlertManager</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">calibration_data</span><span class="p">):</span>
        <span class="c1"># æ›´æ–°å„é¡¹æŒ‡æ ‡</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_metrics</span><span class="p">(</span><span class="n">calibration_data</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">metrics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

            <span class="c1"># æ£€æŸ¥è¶‹åŠ¿</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_degradation_trend</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">alert_manager</span><span class="o">.</span><span class="n">send_warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Calibration </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> degrading&quot;</span>
                <span class="p">)</span>

            <span class="c1"># æ£€æŸ¥é˜ˆå€¼</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_threshold</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">alert_manager</span><span class="o">.</span><span class="n">send_alert</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Calibration </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> below threshold: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_health_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">report</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
            <span class="s1">&#39;overall_health&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_overall_health</span><span class="p">(),</span>
            <span class="s1">&#39;metrics_summary&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">buffer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">report</span><span class="p">[</span><span class="s1">&#39;metrics_summary&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;current&#39;</span><span class="p">:</span> <span class="n">buffer</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="s1">&#39;mean&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span>
                <span class="s1">&#39;std&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span>
                <span class="s1">&#39;trend&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_trend</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="c1"># ç”Ÿæˆå»ºè®®</span>
        <span class="k">if</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;overall_health&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="p">:</span>
            <span class="n">report</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;Schedule maintenance calibration&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">report</span>
</code></pre></div>

<h3 id="10311">10.3.11 å®é™…éƒ¨ç½²è€ƒè™‘</h3>
<h4 id="1_8">1. è®¡ç®—èµ„æºä¼˜åŒ–</h4>
<p><strong>GPUåŠ é€Ÿå®ç°ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kr">__global__</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">point_cloud_alignment_kernel</span><span class="p">(</span>
<span class="w">    </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">points1</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">points2</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">transform</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n_points</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">residuals</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">blockIdx</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">blockDim</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">threadIdx</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">idx</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">n_points</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// åŠ è½½ç‚¹åæ ‡</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">make_float3</span><span class="p">(</span>
<span class="w">        </span><span class="n">points1</span><span class="p">[</span><span class="mi">3</span><span class="o">*</span><span class="n">idx</span><span class="p">],</span><span class="w"> </span>
<span class="w">        </span><span class="n">points1</span><span class="p">[</span><span class="mi">3</span><span class="o">*</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span>
<span class="w">        </span><span class="n">points1</span><span class="p">[</span><span class="mi">3</span><span class="o">*</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// åº”ç”¨å˜æ¢</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">p1_transformed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transform_point</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">transform</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// æŸ¥æ‰¾æœ€è¿‘é‚»å¹¶è®¡ç®—æ®‹å·®</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">min_dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">INFINITY</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n_points</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">float3</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">make_float3</span><span class="p">(</span>
<span class="w">            </span><span class="n">points2</span><span class="p">[</span><span class="mi">3</span><span class="o">*</span><span class="n">i</span><span class="p">],</span><span class="w"> </span>
<span class="w">            </span><span class="n">points2</span><span class="p">[</span><span class="mi">3</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span>
<span class="w">            </span><span class="n">points2</span><span class="p">[</span><span class="mi">3</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distance</span><span class="p">(</span><span class="n">p1_transformed</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">);</span>
<span class="w">        </span><span class="n">min_dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fminf</span><span class="p">(</span><span class="n">min_dist</span><span class="p">,</span><span class="w"> </span><span class="n">dist</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">residuals</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min_dist</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>æ¨¡å‹é‡åŒ–ï¼šINT8æ¨ç†</li>
<li>çŸ¥è¯†è’¸é¦ï¼šå°æ¨¡å‹éƒ¨ç½²</li>
<li>å¢é‡è®¡ç®—ï¼šä»…å¤„ç†å˜åŒ–åŒºåŸŸ</li>
</ul>
<h4 id="2_8">2. é•¿æœŸè¿ç»´ç­–ç•¥</h4>
<p><strong>æ ‡å®šç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CalibrationLifecycleManager</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calibration_history</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maintenance_schedule</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">degradation_model</span> <span class="o">=</span> <span class="n">DegradationPredictor</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">predict_maintenance_need</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># åŸºäºå†å²æ•°æ®é¢„æµ‹</span>
        <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_degradation_features</span><span class="p">()</span>
        <span class="n">time_to_failure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degradation_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;predicted_failure_date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">time_to_failure</span><span class="p">),</span>
            <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">degradation_model</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span>
            <span class="s1">&#39;recommended_action&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_maintenance_recommendation</span><span class="p">()</span>
        <span class="p">}</span>
</code></pre></div>

<h2 id="_1">æœ¬ç« å°ç»“</h2>
<p>æœ¬ç« ç³»ç»Ÿä»‹ç»äº†æ¿€å…‰é›·è¾¾çš„æ ‡å®šæŠ€æœ¯ï¼Œæ¶µç›–å†…å‚æ ‡å®šã€å¤–å‚æ ‡å®šå’Œåœ¨çº¿è‡ªæ ‡å®šä¸‰ä¸ªæ ¸å¿ƒæ–¹é¢ï¼š</p>
<p><strong>å…³é”®æ¦‚å¿µï¼š</strong></p>
<ol>
<li>
<p><strong>å†…å‚æ ‡å®š</strong>ï¼šæ ¡æ­£ç³»ç»Ÿå›ºæœ‰è¯¯å·®
   - æµ‹è·è¯¯å·®æ¨¡å‹ï¼š$d_{true} = a \cdot d_{meas} + b$
   - æ¸©åº¦è¡¥å¿ï¼šè€ƒè™‘ç¯å¢ƒå› ç´ çš„å½±å“
   - å¤šé€šé“ä¸€è‡´æ€§ï¼šç¡®ä¿æ‰€æœ‰æ¿€å…‰é€šé“çš„æµ‹é‡ä¸€è‡´æ€§</p>
</li>
<li>
<p><strong>å¤–å‚æ ‡å®š</strong>ï¼šç¡®å®šä¼ æ„Ÿå™¨é—´çš„ç›¸å¯¹ä½å§¿
   - æ‰‹çœ¼æ ‡å®šé—®é¢˜ï¼š$AX = XB$
   - SVDæœ€å°äºŒä¹˜è§£æ³•ï¼šé²æ£’çš„æ•°å­¦æ±‚è§£æ–¹æ³•
   - ä¸ç¡®å®šåº¦åˆ†æï¼šé‡åŒ–æ ‡å®šç²¾åº¦</p>
</li>
<li>
<p><strong>åœ¨çº¿è‡ªæ ‡å®š</strong>ï¼šè¿è¡Œæ—¶è‡ªåŠ¨ç»´æŠ¤æ ‡å®šç²¾åº¦
   - SLAMåé¦ˆï¼šåˆ©ç”¨åœ°å›¾è´¨é‡ä¼˜åŒ–æ ‡å®š
   - å¹³é¢ç‰¹å¾çº¦æŸï¼šåˆ©ç”¨ç¯å¢ƒå‡ ä½•ä¿¡æ¯
   - è´¨é‡ç›‘æ§ï¼šå®æ—¶è¯„ä¼°æ ‡å®šçŠ¶æ€</p>
</li>
</ol>
<p><strong>é‡è¦å…¬å¼æ±‡æ€»ï¼š</strong></p>
<ul>
<li>æµ‹è·æ ‡å®šï¼š$d_{true} = a \cdot d_{meas} + b + \epsilon(d)$</li>
<li>æ—‹è½¬æ±‚è§£ï¼š$R = V \cdot \text{diag}(1, 1, \det(VU^T)) \cdot U^T$</li>
<li>è´¨é‡æŒ‡æ ‡ï¼š$Q_{total} = w_1 Q_{reg} + w_2 Q_{plane} + w_3 Q_{repeat}$</li>
<li>å‚æ•°å¹³æ»‘ï¼š$\theta_{applied} = \alpha \theta_{new} + (1-\alpha) \theta_{old}$</li>
</ul>
<p><strong>å®è·µè¦ç‚¹ï¼š</strong></p>
<ul>
<li>æ ‡å®šç²¾åº¦ç›´æ¥å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œéœ€å®šæœŸéªŒè¯</li>
<li>æ¸©åº¦å˜åŒ–æ˜¯æ ‡å®šæ¼‚ç§»çš„ä¸»è¦åŸå› </li>
<li>åœ¨çº¿è‡ªæ ‡å®šå¯æ˜¾è‘—æå‡é•¿æœŸè¿è¡Œçš„å¯é æ€§</li>
<li>å¤šä¼ æ„Ÿå™¨ç³»ç»Ÿéœ€è€ƒè™‘æ—¶é—´åŒæ­¥é—®é¢˜</li>
</ul>
<h2 id="_2">ç»ƒä¹ é¢˜</h2>
<h3 id="_3">åŸºç¡€é¢˜</h3>
<ol>
<li><strong>æµ‹è·è¯¯å·®æ ‡å®š</strong>
æŸæ¿€å…‰é›·è¾¾åœ¨10mã€30mã€50må¤„æµ‹å¾—è·ç¦»åˆ†åˆ«ä¸º10.12mã€30.35mã€50.59mã€‚ä½¿ç”¨æœ€å°äºŒä¹˜æ³•è®¡ç®—æ¯”ä¾‹å› å­aå’Œåå·®bã€‚</li>
</ol>
<p><em>Hint: æ„å»ºçŸ©é˜µæ–¹ç¨‹$Ax = b$ï¼Œå…¶ä¸­$A$ä¸ºæµ‹é‡å€¼çŸ©é˜µã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<p>æ„å»ºæ–¹ç¨‹ç»„ï¼š
$$\begin{bmatrix} 10.12 &amp; 1 \\ 30.35 &amp; 1 \\ 50.59 &amp; 1 \end{bmatrix} \begin{bmatrix} a \\ b \end{bmatrix} = \begin{bmatrix} 10 \\ 30 \\ 50 \end{bmatrix}$$
ä½¿ç”¨æœ€å°äºŒä¹˜æ³•ï¼š
$$A^T A = \begin{bmatrix} 3826.16 &amp; 91.06 \\ 91.06 &amp; 3 \end{bmatrix}$$
æ±‚è§£å¾—ï¼š$a = 0.9877$ï¼Œ$b = -0.0088m$</p>
</details>
<ol start="2">
<li><strong>æ¸©åº¦è¡¥å¿è®¡ç®—</strong>
å·²çŸ¥æ¸©åº¦è¡¥å¿ç³»æ•°$\alpha_T = 3.2 \times 10^{-5}/Â°C$ï¼Œå‚è€ƒæ¸©åº¦20Â°Cã€‚å½“å‰æ¸©åº¦-10Â°Cï¼Œæµ‹é‡è·ç¦»100mï¼Œè®¡ç®—è¡¥å¿åçš„è·ç¦»ã€‚</li>
</ol>
<p><em>Hint: ä½¿ç”¨çº¿æ€§æ¸©åº¦è¡¥å¿å…¬å¼ã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<p>æ¸©åº¦å·®ï¼š$\Delta T = -10 - 20 = -30Â°C$</p>
<p>è¡¥å¿ç³»æ•°ï¼š$1 + \alpha_T \Delta T = 1 + 3.2 \times 10^{-5} \times (-30) = 0.99904$</p>
<p>è¡¥å¿åè·ç¦»ï¼š$d_{comp} = 100 \times 0.99904 = 99.904m$</p>
</details>
<ol start="3">
<li><strong>å¤–å‚æ—‹è½¬çŸ©é˜µéªŒè¯</strong>
ç»™å®šæ—‹è½¬çŸ©é˜µ$R$ï¼Œå¦‚ä½•éªŒè¯å…¶æ˜¯å¦ä¸ºæœ‰æ•ˆçš„æ—‹è½¬çŸ©é˜µï¼Ÿåˆ—å‡ºéœ€è¦æ£€æŸ¥çš„æ¡ä»¶ã€‚</li>
</ol>
<p><em>Hint: è€ƒè™‘æ—‹è½¬çŸ©é˜µçš„åŸºæœ¬æ€§è´¨ã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<p>æœ‰æ•ˆæ—‹è½¬çŸ©é˜µéœ€æ»¡è¶³ï¼š</p>
<ol>
<li>æ­£äº¤æ€§ï¼š$R^T R = I$</li>
<li>è¡Œåˆ—å¼ä¸º1ï¼š$\det(R) = 1$</li>
<li>å„è¡Œã€åˆ—å‘é‡æ¨¡é•¿ä¸º1</li>
<li>æ•°å€¼æ£€æŸ¥ï¼š$|R^T R - I|_F &lt; \epsilon$ï¼ˆå¦‚$\epsilon = 10^{-6}$ï¼‰</li>
</ol>
</details>
<ol start="4">
<li><strong>æ ‡å®šè´¨é‡è¯„ä¼°</strong>
æŸæ¿€å…‰é›·è¾¾ä¸ç›¸æœºæ ‡å®šåï¼Œé‡æŠ•å½±è¯¯å·®ä¸º3.5åƒç´ ã€‚ç›¸æœºåˆ†è¾¨ç‡1920Ã—1080ï¼Œç„¦è·800åƒç´ ã€‚è¯„ä¼°æ­¤æ ‡å®šè´¨é‡ã€‚</li>
</ol>
<p><em>Hint: è€ƒè™‘åƒç´ è¯¯å·®å¯¹åº”çš„è§’åº¦è¯¯å·®ã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<p>è§’åº¦è¯¯å·®ï¼š$\theta = \arctan(\frac{3.5}{800}) = 0.25Â°$</p>
<p>ç›¸å¯¹è¯¯å·®ï¼š$\frac{3.5}{1920} = 0.18\%$ï¼ˆç›¸å¯¹äºå›¾åƒå®½åº¦ï¼‰</p>
<p>è¯„ä¼°ï¼šé‡æŠ•å½±è¯¯å·®åå¤§ï¼ˆç›®æ ‡&lt;2åƒç´ ï¼‰ï¼Œå»ºè®®é‡æ–°æ ‡å®šæˆ–æ£€æŸ¥æ ‡å®šæ•°æ®è´¨é‡ã€‚</p>
</details>
<h3 id="_4">æŒ‘æˆ˜é¢˜</h3>
<ol start="5">
<li><strong>å¤šæ¿€å…‰é›·è¾¾ç³»ç»Ÿæ ‡å®šä¼˜åŒ–</strong>
ä¸‰ä¸ªæ¿€å…‰é›·è¾¾å‘ˆä¸‰è§’å½¢å¸ƒç½®ï¼Œç›¸äº’é—´æœ‰é‡å è§†é‡ã€‚è®¾è®¡ä¸€ä¸ªå…¨å±€ä¼˜åŒ–ç®—æ³•ï¼ŒåŒæ—¶æ ‡å®šä¸‰ä¸ªé›·è¾¾é—´çš„ç›¸å¯¹å¤–å‚ã€‚è€ƒè™‘å¦‚ä½•å¤„ç†æ ‡å®šä¸­çš„å°ºåº¦ä¸ä¸€è‡´é—®é¢˜ã€‚</li>
</ol>
<p><em>Hint: æ„å»ºå› å­å›¾ï¼Œè€ƒè™‘é—­ç¯çº¦æŸã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<ol>
<li>
<p>æ„å»ºå› å­å›¾ï¼š
   - èŠ‚ç‚¹ï¼šä¸‰ä¸ªæ¿€å…‰é›·è¾¾çš„ä½å§¿
   - è¾¹ï¼šä¸¤ä¸¤ä¹‹é—´çš„ç›¸å¯¹å˜æ¢è§‚æµ‹</p>
</li>
<li>
<p>ä¼˜åŒ–ç›®æ ‡ï¼š
$$\min \sum_{i&lt;j} |T_i \cdot T_{ij}^{obs} - T_j|^2 + \lambda |T_1 \cdot T_{12} \cdot T_{23} \cdot T_{31} - I|^2$$</p>
</li>
<li>
<p>å°ºåº¦ä¸€è‡´æ€§ï¼š
   - ä½¿ç”¨å·²çŸ¥è·ç¦»çš„æ ‡å®šç‰©
   - æˆ–å›ºå®šä¸€å¯¹é›·è¾¾é—´çš„è·ç¦»ä½œä¸ºå°ºåº¦åŸºå‡†</p>
</li>
<li>
<p>è¿­ä»£ä¼˜åŒ–ï¼š
   - åˆå§‹åŒ–ï¼šä½¿ç”¨ä¸¤ä¸¤ICPç»“æœ
   - ä½¿ç”¨g2oæˆ–Ceresæ±‚è§£
   - éªŒè¯é—­ç¯è¯¯å·®&lt;1cm
</details></p>
</li>
<li>
<p><strong>åœ¨çº¿æ ‡å®šç®—æ³•è®¾è®¡</strong>
è®¾è®¡ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„åœ¨çº¿æ ‡å®šè´¨é‡è¯„ä¼°ç½‘ç»œã€‚è¾“å…¥ä¸ºè¿ç»­10å¸§ç‚¹äº‘ï¼Œè¾“å‡ºä¸ºæ ‡å®šè´¨é‡åˆ†æ•°å’Œå»ºè®®çš„å‚æ•°è°ƒæ•´é‡ã€‚</p>
</li>
</ol>
<p><em>Hint: è€ƒè™‘ä½¿ç”¨PointNet++æå–ç‰¹å¾ï¼Œç»“åˆæ—¶åºä¿¡æ¯ã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<p>ç½‘ç»œæ¶æ„ï¼š</p>
<ol>
<li>ç‰¹å¾æå–ï¼šPointNet++å¤„ç†æ¯å¸§ç‚¹äº‘</li>
<li>æ—¶åºèåˆï¼šLSTMå¤„ç†10å¸§ç‰¹å¾åºåˆ—</li>
<li>è´¨é‡è¯„ä¼°å¤´ï¼šè¾“å‡º0-1è´¨é‡åˆ†æ•°</li>
<li>å‚æ•°å›å½’å¤´ï¼šè¾“å‡º6-DOFè°ƒæ•´é‡</li>
</ol>
<p>è®­ç»ƒç­–ç•¥ï¼š</p>
<ul>
<li>æ•°æ®å¢å¼ºï¼šæ·»åŠ æ ‡å®šè¯¯å·®</li>
<li>æŸå¤±å‡½æ•°ï¼šè´¨é‡åˆ†ç±»æŸå¤± + å‚æ•°å›å½’æŸå¤±</li>
<li>çœŸå€¼æ ‡ç­¾ï¼šé€šè¿‡ç¦»çº¿é«˜ç²¾åº¦æ ‡å®šè·å¾—</li>
</ul>
<p>éƒ¨ç½²è€ƒè™‘ï¼š</p>
<ul>
<li>æ¨¡å‹é‡åŒ–å‡å°‘è®¡ç®—é‡</li>
<li>æ»‘åŠ¨çª—å£å®æ—¶å¤„ç†</li>
<li>è¾“å‡ºå¹³æ»‘é¿å…éœ‡è¡</li>
</ul>
</details>
<ol start="7">
<li><strong>æ¸©åº¦è‡ªé€‚åº”è¡¥å¿</strong>
æ¿€å…‰é›·è¾¾åœ¨æç«¯æ¸©åº¦å¾ªç¯æµ‹è¯•ä¸­ï¼ˆ-40Â°Cåˆ°+85Â°Cï¼‰ï¼Œå‘ç°æ¸©åº¦è¡¥å¿æ¨¡å‹å­˜åœ¨éçº¿æ€§ã€‚è®¾è®¡ä¸€ä¸ªè‡ªé€‚åº”ç®—æ³•ï¼Œåœ¨çº¿å­¦ä¹ æ¸©åº¦-è¯¯å·®æ›²çº¿ã€‚</li>
</ol>
<p><em>Hint: ä½¿ç”¨é€’å½’æœ€å°äºŒä¹˜æˆ–å¡å°”æ›¼æ»¤æ³¢ã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<p>è‡ªé€‚åº”ç®—æ³•è®¾è®¡ï¼š</p>
<ol>
<li>
<p>æ‰©å±•æ¸©åº¦æ¨¡å‹ï¼š
$$d_{comp} = d_{meas}[1 + \sum_{i=1}^{n} a_i T^i]$$</p>
</li>
<li>
<p>é€’å½’æœ€å°äºŒä¹˜(RLS)æ›´æ–°ï¼š</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>K = PÂ·Ï†/(Î» + Ï†áµ€Â·PÂ·Ï†)
e = d_true - Ï†áµ€Â·Î¸
Î¸ = Î¸ + KÂ·e
P = (P - KÂ·Ï†áµ€Â·P)/Î»
</code></pre></div>

<p>å…¶ä¸­Ï†ä¸ºæ¸©åº¦ç‰¹å¾å‘é‡[1,T,TÂ²,...]</p>
<ol start="3">
<li>
<p>è‡ªé€‚åº”ç­–ç•¥ï¼š
   - é—å¿˜å› å­Î»=0.95-0.99
   - æ¸©åº¦å˜åŒ–ç‡å¤§æ—¶å‡å°Î»
   - ç¨³å®šåå¢å¤§Î»é˜²æ­¢è¿‡æ‹Ÿåˆ</p>
</li>
<li>
<p>å®æ—¶éªŒè¯ï¼š
   - ä¿ç•™éªŒè¯æ•°æ®é›†
   - ç›‘æ§é¢„æµ‹è¯¯å·®
   - å¼‚å¸¸æ—¶å›é€€åˆ°å›ºå®šæ¨¡å‹</p>
</li>
</ol>
</details>
<ol start="8">
<li><strong>æ ‡å®šä¼ é€’è¯¯å·®åˆ†æ</strong>
åœ¨Aâ†’Bâ†’Câ†’Dçš„å¤šä¼ æ„Ÿå™¨é“¾å¼æ ‡å®šä¸­ï¼Œæ¯æ­¥æ ‡å®šçš„æ—‹è½¬è¯¯å·®æ ‡å‡†å·®ä¸º0.1Â°ï¼Œå¹³ç§»è¯¯å·®ä¸º5mmã€‚è®¡ç®—å¹¶åˆ†æAåˆ°Dçš„æ€»è¯¯å·®åˆ†å¸ƒã€‚</li>
</ol>
<p><em>Hint: ä½¿ç”¨è¯¯å·®ä¼ æ’­ç†è®ºå’Œè’™ç‰¹å¡æ´›ä»¿çœŸã€‚</em></p>
<details>
<summary>ç­”æ¡ˆ</summary>
<p>ç†è®ºåˆ†æï¼š</p>
<ol>
<li>
<p>æ—‹è½¬è¯¯å·®ï¼ˆå°è§’åº¦è¿‘ä¼¼ï¼‰ï¼š
$$\sigma_{rot}^{total} = \sqrt{3} \times 0.1Â° = 0.173Â°$$</p>
</li>
<li>
<p>å¹³ç§»è¯¯å·®ï¼ˆè€ƒè™‘è€¦åˆï¼‰ï¼š
   - çº¯å¹³ç§»ç´¯ç§¯ï¼š$\sigma_t = \sqrt{3} \times 5mm = 8.66mm$
   - æ—‹è½¬å¼•èµ·çš„å¹³ç§»è¯¯å·®éœ€è€ƒè™‘æ†è‡‚æ•ˆåº”</p>
</li>
</ol>
<p>è’™ç‰¹å¡æ´›éªŒè¯ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ä¼ªä»£ç </span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
    <span class="n">T_AB</span> <span class="o">=</span> <span class="n">çœŸå€¼</span> <span class="o">+</span> <span class="n">é«˜æ–¯å™ªå£°</span><span class="p">(</span><span class="mf">0.1</span><span class="err">Â°</span><span class="p">,</span> <span class="mi">5</span><span class="n">mm</span><span class="p">)</span>
    <span class="n">T_BC</span> <span class="o">=</span> <span class="n">çœŸå€¼</span> <span class="o">+</span> <span class="n">é«˜æ–¯å™ªå£°</span><span class="p">(</span><span class="mf">0.1</span><span class="err">Â°</span><span class="p">,</span> <span class="mi">5</span><span class="n">mm</span><span class="p">)</span>
    <span class="n">T_CD</span> <span class="o">=</span> <span class="n">çœŸå€¼</span> <span class="o">+</span> <span class="n">é«˜æ–¯å™ªå£°</span><span class="p">(</span><span class="mf">0.1</span><span class="err">Â°</span><span class="p">,</span> <span class="mi">5</span><span class="n">mm</span><span class="p">)</span>
    <span class="n">T_AD</span> <span class="o">=</span> <span class="n">T_AB</span> <span class="o">@</span> <span class="n">T_BC</span> <span class="o">@</span> <span class="n">T_CD</span>
    <span class="n">è®°å½•è¯¯å·®</span>

<span class="n">è®¡ç®—è¯¯å·®åˆ†å¸ƒç»Ÿè®¡é‡</span>
</code></pre></div>

<p>ç»“æœåˆ†æï¼š</p>
<ul>
<li>è¯¯å·®å‘ˆè¿‘ä¼¼é«˜æ–¯åˆ†å¸ƒ</li>
<li>å­˜åœ¨è½»å¾®çš„éçº¿æ€§æ•ˆåº”</li>
<li>å»ºè®®ç›´æ¥æ ‡å®šA-Då‡å°‘ç´¯ç§¯è¯¯å·®</li>
</ul>
</details>
</details>
            </article>
            
            <nav class="page-nav"><a href="chapter9.html" class="nav-link prev">â† Chapter 9: é«˜çº§ç‚¹äº‘ç®—æ³•</a><a href="chapter11.html" class="nav-link next">Chapter 11: å¤šä¼ æ„Ÿå™¨èåˆç®—æ³• â†’</a></nav>
        </main>
    </div>
</body>
</html>